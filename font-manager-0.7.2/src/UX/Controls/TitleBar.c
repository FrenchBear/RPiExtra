/* TitleBar.c generated by valac 0.26.1, the Vala compiler
 * generated from TitleBar.vala, do not modify */

/* TitleBar.vala
 *
 * Copyright (C) 2009 - 2015 Jerry Casiano
 *
 * This file is part of Font Manager.
 *
 * Font Manager is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Font Manager is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Font Manager.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Author:
 *        Jerry Casiano <JerryCasiano@gmail.com>
*/

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include <glib/gi18n-lib.h>
#include <gio/gio.h>


#define FONT_MANAGER_TYPE_TITLE_BAR (font_manager_title_bar_get_type ())
#define FONT_MANAGER_TITLE_BAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FONT_MANAGER_TYPE_TITLE_BAR, FontManagerTitleBar))
#define FONT_MANAGER_TITLE_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FONT_MANAGER_TYPE_TITLE_BAR, FontManagerTitleBarClass))
#define FONT_MANAGER_IS_TITLE_BAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FONT_MANAGER_TYPE_TITLE_BAR))
#define FONT_MANAGER_IS_TITLE_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FONT_MANAGER_TYPE_TITLE_BAR))
#define FONT_MANAGER_TITLE_BAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FONT_MANAGER_TYPE_TITLE_BAR, FontManagerTitleBarClass))

typedef struct _FontManagerTitleBar FontManagerTitleBar;
typedef struct _FontManagerTitleBarClass FontManagerTitleBarClass;
typedef struct _FontManagerTitleBarPrivate FontManagerTitleBarPrivate;

#define FONT_MANAGER_TYPE_BASE_CONTROLS (font_manager_base_controls_get_type ())
#define FONT_MANAGER_BASE_CONTROLS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FONT_MANAGER_TYPE_BASE_CONTROLS, FontManagerBaseControls))
#define FONT_MANAGER_BASE_CONTROLS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FONT_MANAGER_TYPE_BASE_CONTROLS, FontManagerBaseControlsClass))
#define FONT_MANAGER_IS_BASE_CONTROLS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FONT_MANAGER_TYPE_BASE_CONTROLS))
#define FONT_MANAGER_IS_BASE_CONTROLS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FONT_MANAGER_TYPE_BASE_CONTROLS))
#define FONT_MANAGER_BASE_CONTROLS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FONT_MANAGER_TYPE_BASE_CONTROLS, FontManagerBaseControlsClass))

typedef struct _FontManagerBaseControls FontManagerBaseControls;
typedef struct _FontManagerBaseControlsClass FontManagerBaseControlsClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))

#define FONT_MANAGER_TYPE_APPLICATION (font_manager_application_get_type ())
#define FONT_MANAGER_APPLICATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FONT_MANAGER_TYPE_APPLICATION, FontManagerApplication))
#define FONT_MANAGER_APPLICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FONT_MANAGER_TYPE_APPLICATION, FontManagerApplicationClass))
#define FONT_MANAGER_IS_APPLICATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FONT_MANAGER_TYPE_APPLICATION))
#define FONT_MANAGER_IS_APPLICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FONT_MANAGER_TYPE_APPLICATION))
#define FONT_MANAGER_APPLICATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FONT_MANAGER_TYPE_APPLICATION, FontManagerApplicationClass))

typedef struct _FontManagerApplication FontManagerApplication;
typedef struct _FontManagerApplicationClass FontManagerApplicationClass;
typedef struct _Block8Data Block8Data;
#define _g_variant_unref0(var) ((var == NULL) ? NULL : (var = (g_variant_unref (var), NULL)))

#define FONT_MANAGER_TYPE_MAIN_WINDOW (font_manager_main_window_get_type ())
#define FONT_MANAGER_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FONT_MANAGER_TYPE_MAIN_WINDOW, FontManagerMainWindow))
#define FONT_MANAGER_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FONT_MANAGER_TYPE_MAIN_WINDOW, FontManagerMainWindowClass))
#define FONT_MANAGER_IS_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FONT_MANAGER_TYPE_MAIN_WINDOW))
#define FONT_MANAGER_IS_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FONT_MANAGER_TYPE_MAIN_WINDOW))
#define FONT_MANAGER_MAIN_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FONT_MANAGER_TYPE_MAIN_WINDOW, FontManagerMainWindowClass))

typedef struct _FontManagerMainWindow FontManagerMainWindow;
typedef struct _FontManagerMainWindowClass FontManagerMainWindowClass;

#define FONT_MANAGER_TYPE_MODE (font_manager_mode_get_type ())
#define _g_free0(var) (var = (g_free (var), NULL))

#define TYPE_MENU_ENTRY (menu_entry_get_type ())

#define TYPE_MENU_CALLBACK_WRAPPER (menu_callback_wrapper_get_type ())
#define MENU_CALLBACK_WRAPPER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MENU_CALLBACK_WRAPPER, MenuCallbackWrapper))
#define MENU_CALLBACK_WRAPPER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MENU_CALLBACK_WRAPPER, MenuCallbackWrapperClass))
#define IS_MENU_CALLBACK_WRAPPER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MENU_CALLBACK_WRAPPER))
#define IS_MENU_CALLBACK_WRAPPER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MENU_CALLBACK_WRAPPER))
#define MENU_CALLBACK_WRAPPER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MENU_CALLBACK_WRAPPER, MenuCallbackWrapperClass))

typedef struct _MenuCallbackWrapper MenuCallbackWrapper;
typedef struct _MenuCallbackWrapperClass MenuCallbackWrapperClass;
typedef struct _MenuEntry MenuEntry;
#define _menu_callback_wrapper_unref0(var) ((var == NULL) ? NULL : (var = (menu_callback_wrapper_unref (var), NULL)))

struct _FontManagerTitleBar {
	GtkHeaderBar parent_instance;
	FontManagerTitleBarPrivate * priv;
};

struct _FontManagerTitleBarClass {
	GtkHeaderBarClass parent_class;
};

struct _FontManagerTitleBarPrivate {
	GtkMenuButton* _main_menu;
	GtkLabel* _main_menu_label;
	GtkMenuButton* _app_menu;
	GtkToggleButton* _source_toggle;
	FontManagerBaseControls* manage_controls;
	GtkRevealer* revealer;
	GtkImage* main_menu_icon;
	GtkImage* app_menu_icon;
	GtkBox* main_menu_container;
};

struct _Block8Data {
	int _ref_count_;
	FontManagerTitleBar* self;
	FontManagerApplication* application;
};

typedef enum  {
	FONT_MANAGER_MODE_MANAGE,
	FONT_MANAGER_MODE_BROWSE,
	FONT_MANAGER_MODE_CHARACTER_MAP,
	FONT_MANAGER_MODE_COMPARE,
	FONT_MANAGER_MODE_ORGANIZE,
	FONT_MANAGER_MODE_WEB,
	FONT_MANAGER_MODE_N_MODES
} FontManagerMode;

struct _MenuEntry {
	gchar* action_name;
	gchar* display_name;
	gchar* detailed_action_name;
	gchar* accelerator;
	MenuCallbackWrapper* method;
};

typedef void (*MenuCallback) (void* user_data);

static gpointer font_manager_title_bar_parent_class = NULL;

GType font_manager_title_bar_get_type (void) G_GNUC_CONST;
GType font_manager_base_controls_get_type (void) G_GNUC_CONST;
#define FONT_MANAGER_TITLE_BAR_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), FONT_MANAGER_TYPE_TITLE_BAR, FontManagerTitleBarPrivate))
enum  {
	FONT_MANAGER_TITLE_BAR_DUMMY_PROPERTY,
	FONT_MANAGER_TITLE_BAR_MAIN_MENU,
	FONT_MANAGER_TITLE_BAR_MAIN_MENU_LABEL,
	FONT_MANAGER_TITLE_BAR_APP_MENU,
	FONT_MANAGER_TITLE_BAR_SOURCE_TOGGLE
};
FontManagerTitleBar* font_manager_title_bar_new (void);
FontManagerTitleBar* font_manager_title_bar_construct (GType object_type);
#define FONT_MANAGER_ABOUT_NAME _ ("Font Manager")
static void font_manager_title_bar_set_main_menu (FontManagerTitleBar* self, GtkMenuButton* value);
GtkMenuButton* font_manager_title_bar_get_main_menu (FontManagerTitleBar* self);
void font_manager_title_bar_set_main_menu_label (FontManagerTitleBar* self, GtkLabel* value);
GtkLabel* font_manager_title_bar_get_main_menu_label (FontManagerTitleBar* self);
static void font_manager_title_bar_set_app_menu (FontManagerTitleBar* self, GtkMenuButton* value);
GtkMenuButton* font_manager_title_bar_get_app_menu (FontManagerTitleBar* self);
#define FONT_MANAGER_ABOUT_ICON "font-x-generic"
FontManagerBaseControls* font_manager_base_controls_new (void);
FontManagerBaseControls* font_manager_base_controls_construct (GType object_type);
GtkButton* font_manager_base_controls_get_add_button (FontManagerBaseControls* self);
GtkButton* font_manager_base_controls_get_remove_button (FontManagerBaseControls* self);
GtkSeparator* add_separator (GtkBox* box, GtkOrientation orientation, GtkPackType pack_type);
GtkBox* font_manager_base_controls_get_box (FontManagerBaseControls* self);
static void font_manager_title_bar_set_source_toggle (FontManagerTitleBar* self, GtkToggleButton* value);
GtkToggleButton* font_manager_title_bar_get_source_toggle (FontManagerTitleBar* self);
static void font_manager_title_bar_set_menus (FontManagerTitleBar* self);
static void font_manager_title_bar_connect_signals (FontManagerTitleBar* self);
static void font_manager_title_bar_real_show (GtkWidget* base);
static GMenuModel* font_manager_title_bar_get_main_menu_model (FontManagerTitleBar* self);
static GMenuModel* font_manager_title_bar_get_app_menu_model (FontManagerTitleBar* self);
static void __lambda68_ (FontManagerTitleBar* self);
static void ___lambda68__gtk_button_clicked (GtkButton* _sender, gpointer self);
static void __lambda69_ (FontManagerTitleBar* self);
static void ___lambda69__gtk_button_clicked (GtkButton* _sender, gpointer self);
static void __lambda70_ (FontManagerTitleBar* self);
static void ___lambda70__gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self);
void font_manager_title_bar_reveal_controls (FontManagerTitleBar* self, gboolean reveal);
void font_manager_title_bar_use_toolbar_styling (FontManagerTitleBar* self);
GType font_manager_application_get_type (void) G_GNUC_CONST;
guint font_manager_application_register_object (void* object, GDBusConnection* connection, const gchar* path, GError** error);
static Block8Data* block8_data_ref (Block8Data* _data8_);
static void block8_data_unref (void * _userdata_);
static GVariant* _variant_new1 (const gchar* value);
static void __lambda65_ (Block8Data* _data8_, GSimpleAction* a, GVariant* s);
GType font_manager_main_window_get_type (void) G_GNUC_CONST;
FontManagerMainWindow* font_manager_application_get_main_window (FontManagerApplication* self);
GType font_manager_mode_get_type (void) G_GNUC_CONST;
FontManagerMode font_manager_mode_parse (const gchar* mode);
static gchar* _variant_get2 (GVariant* value);
void font_manager_main_window_set_mode (FontManagerMainWindow* self, FontManagerMode value);
static void ___lambda65__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static GVariant* _variant_new3 (gchar* value);
gchar* font_manager_mode_to_translatable_string (FontManagerMode self);
GType menu_entry_get_type (void) G_GNUC_CONST;
gpointer menu_callback_wrapper_ref (gpointer instance);
void menu_callback_wrapper_unref (gpointer instance);
GParamSpec* param_spec_menu_callback_wrapper (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_menu_callback_wrapper (GValue* value, gpointer v_object);
void value_take_menu_callback_wrapper (GValue* value, gpointer v_object);
gpointer value_get_menu_callback_wrapper (const GValue* value);
GType menu_callback_wrapper_get_type (void) G_GNUC_CONST;
MenuEntry* menu_entry_dup (const MenuEntry* self);
void menu_entry_free (MenuEntry* self);
void menu_entry_copy (const MenuEntry* self, MenuEntry* dest);
void menu_entry_destroy (MenuEntry* self);
void font_manager_application_help (FontManagerApplication* self);
static void _font_manager_application_help_menu_callback (gpointer self);
MenuCallbackWrapper* menu_callback_wrapper_new (MenuCallback c, void* c_target);
MenuCallbackWrapper* menu_callback_wrapper_construct (GType object_type, MenuCallback c, void* c_target);
void menu_entry_init (MenuEntry *self, const gchar* name, const gchar* label, const gchar* detailed_signal, const gchar* accel, MenuCallbackWrapper* cbw);
void font_manager_application_about (FontManagerApplication* self);
static void _font_manager_application_about_menu_callback (gpointer self);
void font_manager_application_quit (FontManagerApplication* self);
static void _font_manager_application_quit_menu_callback (gpointer self);
void add_action_from_menu_entry (GActionMap* map, MenuEntry* entry);
static void _vala_MenuEntry_array_free (MenuEntry* array, gint array_length);
static void font_manager_title_bar_finalize (GObject* obj);
static void _vala_font_manager_title_bar_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_font_manager_title_bar_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


FontManagerTitleBar* font_manager_title_bar_construct (GType object_type) {
	FontManagerTitleBar * self = NULL;
	GtkStyleContext* ctx = NULL;
	GtkStyleContext* _tmp0_ = NULL;
	GtkStyleContext* _tmp1_ = NULL;
	GtkMenuButton* _tmp2_ = NULL;
	GtkMenuButton* _tmp3_ = NULL;
	GtkMenuButton* _tmp4_ = NULL;
	GtkImage* _tmp5_ = NULL;
	GtkBox* _tmp6_ = NULL;
	GtkBox* _tmp7_ = NULL;
	GtkImage* _tmp8_ = NULL;
	GtkLabel* _tmp9_ = NULL;
	GtkLabel* _tmp10_ = NULL;
	GtkBox* _tmp11_ = NULL;
	GtkLabel* _tmp12_ = NULL;
	GtkMenuButton* _tmp13_ = NULL;
	GtkBox* _tmp14_ = NULL;
	GtkMenuButton* _tmp15_ = NULL;
	GtkMenuButton* _tmp16_ = NULL;
	GtkMenuButton* _tmp17_ = NULL;
	GtkMenuButton* _tmp18_ = NULL;
	GtkMenuButton* _tmp19_ = NULL;
	GtkImage* _tmp20_ = NULL;
	GtkMenuButton* _tmp21_ = NULL;
	GtkImage* _tmp22_ = NULL;
	GtkMenuButton* _tmp23_ = NULL;
	GtkMenuButton* _tmp24_ = NULL;
	GtkRevealer* _tmp25_ = NULL;
	GtkRevealer* _tmp26_ = NULL;
	FontManagerBaseControls* _tmp27_ = NULL;
	FontManagerBaseControls* _tmp28_ = NULL;
	FontManagerBaseControls* _tmp29_ = NULL;
	GtkButton* _tmp30_ = NULL;
	GtkButton* _tmp31_ = NULL;
	const gchar* _tmp32_ = NULL;
	FontManagerBaseControls* _tmp33_ = NULL;
	GtkButton* _tmp34_ = NULL;
	GtkButton* _tmp35_ = NULL;
	const gchar* _tmp36_ = NULL;
	FontManagerBaseControls* _tmp37_ = NULL;
	GtkBox* _tmp38_ = NULL;
	GtkBox* _tmp39_ = NULL;
	GtkSeparator* _tmp40_ = NULL;
	GtkSeparator* _tmp41_ = NULL;
	FontManagerBaseControls* _tmp42_ = NULL;
	GtkBox* _tmp43_ = NULL;
	GtkBox* _tmp44_ = NULL;
	FontManagerBaseControls* _tmp45_ = NULL;
	GtkBox* _tmp46_ = NULL;
	GtkBox* _tmp47_ = NULL;
	GList* _tmp48_ = NULL;
	GList* _tmp49_ = NULL;
	gconstpointer _tmp50_ = NULL;
	GtkToggleButton* _tmp51_ = NULL;
	GtkToggleButton* _tmp52_ = NULL;
	GtkToggleButton* _tmp53_ = NULL;
	GtkImage* _tmp54_ = NULL;
	GtkImage* _tmp55_ = NULL;
	GtkToggleButton* _tmp56_ = NULL;
	GtkToggleButton* _tmp57_ = NULL;
	const gchar* _tmp58_ = NULL;
	FontManagerBaseControls* _tmp59_ = NULL;
	GtkBox* _tmp60_ = NULL;
	GtkBox* _tmp61_ = NULL;
	GtkToggleButton* _tmp62_ = NULL;
	GtkRevealer* _tmp63_ = NULL;
	FontManagerBaseControls* _tmp64_ = NULL;
	GtkMenuButton* _tmp65_ = NULL;
	GtkRevealer* _tmp66_ = NULL;
	GtkMenuButton* _tmp67_ = NULL;
	GtkRevealer* _tmp68_ = NULL;
	GtkStyleContext* _tmp69_ = NULL;
	self = (FontManagerTitleBar*) g_object_new (object_type, NULL);
	gtk_header_bar_set_title ((GtkHeaderBar*) self, FONT_MANAGER_ABOUT_NAME);
	_tmp0_ = gtk_widget_get_style_context ((GtkWidget*) self);
	_tmp1_ = _g_object_ref0 (_tmp0_);
	ctx = _tmp1_;
	gtk_style_context_add_class (ctx, GTK_STYLE_CLASS_TITLEBAR);
	gtk_style_context_add_class (ctx, GTK_STYLE_CLASS_MENUBAR);
	gtk_style_context_set_junction_sides (ctx, GTK_JUNCTION_BOTTOM);
	gtk_header_bar_set_show_close_button ((GtkHeaderBar*) self, FALSE);
	_tmp2_ = (GtkMenuButton*) gtk_menu_button_new ();
	g_object_ref_sink (_tmp2_);
	_tmp3_ = _tmp2_;
	font_manager_title_bar_set_main_menu (self, _tmp3_);
	_g_object_unref0 (_tmp3_);
	_tmp4_ = self->priv->_main_menu;
	gtk_container_set_border_width ((GtkContainer*) _tmp4_, (guint) 2);
	_tmp5_ = (GtkImage*) gtk_image_new_from_icon_name ("view-more-symbolic", GTK_ICON_SIZE_MENU);
	g_object_ref_sink (_tmp5_);
	_g_object_unref0 (self->priv->main_menu_icon);
	self->priv->main_menu_icon = _tmp5_;
	_tmp6_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 1);
	g_object_ref_sink (_tmp6_);
	_g_object_unref0 (self->priv->main_menu_container);
	self->priv->main_menu_container = _tmp6_;
	_tmp7_ = self->priv->main_menu_container;
	_tmp8_ = self->priv->main_menu_icon;
	gtk_box_pack_start (_tmp7_, (GtkWidget*) _tmp8_, FALSE, FALSE, (guint) 0);
	_tmp9_ = (GtkLabel*) gtk_label_new (NULL);
	g_object_ref_sink (_tmp9_);
	_tmp10_ = _tmp9_;
	font_manager_title_bar_set_main_menu_label (self, _tmp10_);
	_g_object_unref0 (_tmp10_);
	_tmp11_ = self->priv->main_menu_container;
	_tmp12_ = self->priv->_main_menu_label;
	gtk_box_pack_end (_tmp11_, (GtkWidget*) _tmp12_, FALSE, TRUE, (guint) 0);
	_tmp13_ = self->priv->_main_menu;
	_tmp14_ = self->priv->main_menu_container;
	gtk_container_add ((GtkContainer*) _tmp13_, (GtkWidget*) _tmp14_);
	_tmp15_ = self->priv->_main_menu;
	gtk_menu_button_set_direction (_tmp15_, GTK_ARROW_DOWN);
	_tmp16_ = self->priv->_main_menu;
	gtk_button_set_relief ((GtkButton*) _tmp16_, GTK_RELIEF_NONE);
	_tmp17_ = (GtkMenuButton*) gtk_menu_button_new ();
	g_object_ref_sink (_tmp17_);
	_tmp18_ = _tmp17_;
	font_manager_title_bar_set_app_menu (self, _tmp18_);
	_g_object_unref0 (_tmp18_);
	_tmp19_ = self->priv->_app_menu;
	gtk_container_set_border_width ((GtkContainer*) _tmp19_, (guint) 2);
	_tmp20_ = (GtkImage*) gtk_image_new_from_icon_name (FONT_MANAGER_ABOUT_ICON, GTK_ICON_SIZE_LARGE_TOOLBAR);
	g_object_ref_sink (_tmp20_);
	_g_object_unref0 (self->priv->app_menu_icon);
	self->priv->app_menu_icon = _tmp20_;
	_tmp21_ = self->priv->_app_menu;
	_tmp22_ = self->priv->app_menu_icon;
	gtk_container_add ((GtkContainer*) _tmp21_, (GtkWidget*) _tmp22_);
	_tmp23_ = self->priv->_app_menu;
	gtk_menu_button_set_direction (_tmp23_, GTK_ARROW_DOWN);
	_tmp24_ = self->priv->_app_menu;
	gtk_button_set_relief ((GtkButton*) _tmp24_, GTK_RELIEF_NONE);
	_tmp25_ = (GtkRevealer*) gtk_revealer_new ();
	g_object_ref_sink (_tmp25_);
	_g_object_unref0 (self->priv->revealer);
	self->priv->revealer = _tmp25_;
	_tmp26_ = self->priv->revealer;
	gtk_revealer_set_transition_type (_tmp26_, GTK_REVEALER_TRANSITION_TYPE_SLIDE_RIGHT);
	_tmp27_ = font_manager_base_controls_new ();
	g_object_ref_sink (_tmp27_);
	_g_object_unref0 (self->priv->manage_controls);
	self->priv->manage_controls = _tmp27_;
	_tmp28_ = self->priv->manage_controls;
	gtk_container_set_border_width ((GtkContainer*) _tmp28_, (guint) 2);
	_tmp29_ = self->priv->manage_controls;
	_tmp30_ = font_manager_base_controls_get_add_button (_tmp29_);
	_tmp31_ = _tmp30_;
	_tmp32_ = _ ("Add Fonts");
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp31_, _tmp32_);
	_tmp33_ = self->priv->manage_controls;
	_tmp34_ = font_manager_base_controls_get_remove_button (_tmp33_);
	_tmp35_ = _tmp34_;
	_tmp36_ = _ ("Remove Fonts");
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp35_, _tmp36_);
	_tmp37_ = self->priv->manage_controls;
	_tmp38_ = font_manager_base_controls_get_box (_tmp37_);
	_tmp39_ = _tmp38_;
	_tmp40_ = add_separator (_tmp39_, GTK_ORIENTATION_VERTICAL, GTK_PACK_START);
	_tmp41_ = _tmp40_;
	_g_object_unref0 (_tmp41_);
	_tmp42_ = self->priv->manage_controls;
	_tmp43_ = font_manager_base_controls_get_box (_tmp42_);
	_tmp44_ = _tmp43_;
	_tmp45_ = self->priv->manage_controls;
	_tmp46_ = font_manager_base_controls_get_box (_tmp45_);
	_tmp47_ = _tmp46_;
	_tmp48_ = gtk_container_get_children ((GtkContainer*) _tmp47_);
	_tmp49_ = _tmp48_;
	_tmp50_ = g_list_nth_data (_tmp49_, (guint) 2);
	gtk_box_reorder_child (_tmp44_, (GtkWidget*) _tmp50_, 0);
	_g_list_free0 (_tmp49_);
	_tmp51_ = (GtkToggleButton*) gtk_toggle_button_new ();
	g_object_ref_sink (_tmp51_);
	_tmp52_ = _tmp51_;
	font_manager_title_bar_set_source_toggle (self, _tmp52_);
	_g_object_unref0 (_tmp52_);
	_tmp53_ = self->priv->_source_toggle;
	_tmp54_ = (GtkImage*) gtk_image_new_from_icon_name ("folder-symbolic", GTK_ICON_SIZE_MENU);
	g_object_ref_sink (_tmp54_);
	_tmp55_ = _tmp54_;
	gtk_button_set_image ((GtkButton*) _tmp53_, (GtkWidget*) _tmp55_);
	_g_object_unref0 (_tmp55_);
	_tmp56_ = self->priv->_source_toggle;
	gtk_button_set_relief ((GtkButton*) _tmp56_, GTK_RELIEF_NONE);
	_tmp57_ = self->priv->_source_toggle;
	_tmp58_ = _ ("Manage Sources");
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp57_, _tmp58_);
	_tmp59_ = self->priv->manage_controls;
	_tmp60_ = font_manager_base_controls_get_box (_tmp59_);
	_tmp61_ = _tmp60_;
	_tmp62_ = self->priv->_source_toggle;
	gtk_box_pack_end (_tmp61_, (GtkWidget*) _tmp62_, FALSE, FALSE, (guint) 0);
	_tmp63_ = self->priv->revealer;
	_tmp64_ = self->priv->manage_controls;
	gtk_container_add ((GtkContainer*) _tmp63_, (GtkWidget*) _tmp64_);
	_tmp65_ = self->priv->_main_menu;
	gtk_header_bar_pack_start ((GtkHeaderBar*) self, (GtkWidget*) _tmp65_);
	_tmp66_ = self->priv->revealer;
	gtk_header_bar_pack_start ((GtkHeaderBar*) self, (GtkWidget*) _tmp66_);
	_tmp67_ = self->priv->_app_menu;
	gtk_header_bar_pack_end ((GtkHeaderBar*) self, (GtkWidget*) _tmp67_);
	_tmp68_ = self->priv->revealer;
	_tmp69_ = gtk_widget_get_style_context ((GtkWidget*) _tmp68_);
	gtk_style_context_add_class (_tmp69_, GTK_STYLE_CLASS_TITLEBAR);
	font_manager_title_bar_set_menus (self);
	font_manager_title_bar_connect_signals (self);
	_g_object_unref0 (ctx);
	return self;
}


FontManagerTitleBar* font_manager_title_bar_new (void) {
	return font_manager_title_bar_construct (FONT_MANAGER_TYPE_TITLE_BAR);
}


static void font_manager_title_bar_real_show (GtkWidget* base) {
	FontManagerTitleBar * self;
	GtkImage* _tmp0_ = NULL;
	GtkBox* _tmp1_ = NULL;
	GtkLabel* _tmp2_ = NULL;
	GtkMenuButton* _tmp3_ = NULL;
	GtkImage* _tmp4_ = NULL;
	GtkMenuButton* _tmp5_ = NULL;
	GtkToggleButton* _tmp6_ = NULL;
	FontManagerBaseControls* _tmp7_ = NULL;
	GtkRevealer* _tmp8_ = NULL;
	self = (FontManagerTitleBar*) base;
	_tmp0_ = self->priv->main_menu_icon;
	gtk_widget_show ((GtkWidget*) _tmp0_);
	_tmp1_ = self->priv->main_menu_container;
	gtk_widget_show ((GtkWidget*) _tmp1_);
	_tmp2_ = self->priv->_main_menu_label;
	gtk_widget_show ((GtkWidget*) _tmp2_);
	_tmp3_ = self->priv->_main_menu;
	gtk_widget_show ((GtkWidget*) _tmp3_);
	_tmp4_ = self->priv->app_menu_icon;
	gtk_widget_show ((GtkWidget*) _tmp4_);
	_tmp5_ = self->priv->_app_menu;
	gtk_widget_show ((GtkWidget*) _tmp5_);
	_tmp6_ = self->priv->_source_toggle;
	gtk_widget_show ((GtkWidget*) _tmp6_);
	_tmp7_ = self->priv->manage_controls;
	gtk_widget_show ((GtkWidget*) _tmp7_);
	_tmp8_ = self->priv->revealer;
	gtk_widget_show ((GtkWidget*) _tmp8_);
	GTK_WIDGET_CLASS (font_manager_title_bar_parent_class)->show ((GtkWidget*) G_TYPE_CHECK_INSTANCE_CAST (self, gtk_header_bar_get_type (), GtkHeaderBar));
	return;
}


static void font_manager_title_bar_set_menus (FontManagerTitleBar* self) {
	GtkMenuButton* _tmp0_ = NULL;
	GMenuModel* _tmp1_ = NULL;
	GMenuModel* _tmp2_ = NULL;
	GtkMenuButton* _tmp3_ = NULL;
	GMenuModel* _tmp4_ = NULL;
	GMenuModel* _tmp5_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_main_menu;
	_tmp1_ = font_manager_title_bar_get_main_menu_model (self);
	_tmp2_ = _tmp1_;
	gtk_menu_button_set_menu_model (_tmp0_, _tmp2_);
	_g_object_unref0 (_tmp2_);
	_tmp3_ = self->priv->_app_menu;
	_tmp4_ = font_manager_title_bar_get_app_menu_model (self);
	_tmp5_ = _tmp4_;
	gtk_menu_button_set_menu_model (_tmp3_, _tmp5_);
	_g_object_unref0 (_tmp5_);
	return;
}


static void __lambda68_ (FontManagerTitleBar* self) {
	GtkToggleButton* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	_tmp0_ = self->priv->_source_toggle;
	_tmp1_ = gtk_toggle_button_get_active (_tmp0_);
	if (_tmp1_) {
		g_signal_emit_by_name (self, "add-selected");
	} else {
		g_signal_emit_by_name (self, "install-selected");
	}
}


static void ___lambda68__gtk_button_clicked (GtkButton* _sender, gpointer self) {
	__lambda68_ ((FontManagerTitleBar*) self);
}


static void __lambda69_ (FontManagerTitleBar* self) {
	g_signal_emit_by_name (self, "remove-selected");
}


static void ___lambda69__gtk_button_clicked (GtkButton* _sender, gpointer self) {
	__lambda69_ ((FontManagerTitleBar*) self);
}


static void __lambda70_ (FontManagerTitleBar* self) {
	gboolean active = FALSE;
	GtkToggleButton* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	_tmp0_ = self->priv->_source_toggle;
	_tmp1_ = gtk_toggle_button_get_active (_tmp0_);
	active = _tmp1_;
	_tmp2_ = active;
	g_signal_emit_by_name (self, "manage-sources", _tmp2_);
	_tmp3_ = active;
	if (_tmp3_) {
		FontManagerBaseControls* _tmp4_ = NULL;
		GtkButton* _tmp5_ = NULL;
		GtkButton* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		FontManagerBaseControls* _tmp8_ = NULL;
		GtkButton* _tmp9_ = NULL;
		GtkButton* _tmp10_ = NULL;
		const gchar* _tmp11_ = NULL;
		_tmp4_ = self->priv->manage_controls;
		_tmp5_ = font_manager_base_controls_get_add_button (_tmp4_);
		_tmp6_ = _tmp5_;
		_tmp7_ = _ ("Add new source");
		gtk_widget_set_tooltip_text ((GtkWidget*) _tmp6_, _tmp7_);
		_tmp8_ = self->priv->manage_controls;
		_tmp9_ = font_manager_base_controls_get_remove_button (_tmp8_);
		_tmp10_ = _tmp9_;
		_tmp11_ = _ ("Remove selected source");
		gtk_widget_set_tooltip_text ((GtkWidget*) _tmp10_, _tmp11_);
	} else {
		FontManagerBaseControls* _tmp12_ = NULL;
		GtkButton* _tmp13_ = NULL;
		GtkButton* _tmp14_ = NULL;
		const gchar* _tmp15_ = NULL;
		FontManagerBaseControls* _tmp16_ = NULL;
		GtkButton* _tmp17_ = NULL;
		GtkButton* _tmp18_ = NULL;
		const gchar* _tmp19_ = NULL;
		_tmp12_ = self->priv->manage_controls;
		_tmp13_ = font_manager_base_controls_get_add_button (_tmp12_);
		_tmp14_ = _tmp13_;
		_tmp15_ = _ ("Add Fonts");
		gtk_widget_set_tooltip_text ((GtkWidget*) _tmp14_, _tmp15_);
		_tmp16_ = self->priv->manage_controls;
		_tmp17_ = font_manager_base_controls_get_remove_button (_tmp16_);
		_tmp18_ = _tmp17_;
		_tmp19_ = _ ("Remove Fonts");
		gtk_widget_set_tooltip_text ((GtkWidget*) _tmp18_, _tmp19_);
	}
}


static void ___lambda70__gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self) {
	__lambda70_ ((FontManagerTitleBar*) self);
}


static void font_manager_title_bar_connect_signals (FontManagerTitleBar* self) {
	FontManagerBaseControls* _tmp0_ = NULL;
	GtkButton* _tmp1_ = NULL;
	GtkButton* _tmp2_ = NULL;
	FontManagerBaseControls* _tmp3_ = NULL;
	GtkButton* _tmp4_ = NULL;
	GtkButton* _tmp5_ = NULL;
	GtkToggleButton* _tmp6_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->manage_controls;
	_tmp1_ = font_manager_base_controls_get_add_button (_tmp0_);
	_tmp2_ = _tmp1_;
	g_signal_connect_object (_tmp2_, "clicked", (GCallback) ___lambda68__gtk_button_clicked, self, 0);
	_tmp3_ = self->priv->manage_controls;
	_tmp4_ = font_manager_base_controls_get_remove_button (_tmp3_);
	_tmp5_ = _tmp4_;
	g_signal_connect_object (_tmp5_, "clicked", (GCallback) ___lambda69__gtk_button_clicked, self, 0);
	_tmp6_ = self->priv->_source_toggle;
	g_signal_connect_object (_tmp6_, "toggled", (GCallback) ___lambda70__gtk_toggle_button_toggled, self, 0);
	return;
}


void font_manager_title_bar_reveal_controls (FontManagerTitleBar* self, gboolean reveal) {
	GtkRevealer* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->revealer;
	_tmp1_ = reveal;
	gtk_revealer_set_reveal_child (_tmp0_, _tmp1_);
	return;
}


void font_manager_title_bar_use_toolbar_styling (FontManagerTitleBar* self) {
	GtkStyleContext* _tmp0_ = NULL;
	GtkStyleContext* _tmp1_ = NULL;
	GtkStyleContext* _tmp2_ = NULL;
	GtkStyleContext* _tmp3_ = NULL;
	GtkRevealer* _tmp4_ = NULL;
	GtkStyleContext* _tmp5_ = NULL;
	GtkRevealer* _tmp6_ = NULL;
	GtkStyleContext* _tmp7_ = NULL;
	FontManagerBaseControls* _tmp8_ = NULL;
	GtkStyleContext* _tmp9_ = NULL;
	FontManagerBaseControls* _tmp10_ = NULL;
	GtkStyleContext* _tmp11_ = NULL;
	g_return_if_fail (self != NULL);
	gtk_header_bar_set_title ((GtkHeaderBar*) self, "");
	_tmp0_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_remove_class (_tmp0_, "header-bar");
	_tmp1_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_remove_class (_tmp1_, "titlebar");
	_tmp2_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_remove_class (_tmp2_, "menubar");
	_tmp3_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_add_class (_tmp3_, GTK_STYLE_CLASS_PRIMARY_TOOLBAR);
	_tmp4_ = self->priv->revealer;
	_tmp5_ = gtk_widget_get_style_context ((GtkWidget*) _tmp4_);
	gtk_style_context_remove_class (_tmp5_, GTK_STYLE_CLASS_TITLEBAR);
	_tmp6_ = self->priv->revealer;
	_tmp7_ = gtk_widget_get_style_context ((GtkWidget*) _tmp6_);
	gtk_style_context_add_class (_tmp7_, GTK_STYLE_CLASS_PRIMARY_TOOLBAR);
	_tmp8_ = self->priv->manage_controls;
	_tmp9_ = gtk_widget_get_style_context ((GtkWidget*) _tmp8_);
	gtk_style_context_add_class (_tmp9_, GTK_STYLE_CLASS_TOOLBAR);
	_tmp10_ = self->priv->manage_controls;
	_tmp11_ = gtk_widget_get_style_context ((GtkWidget*) _tmp10_);
	gtk_style_context_add_class (_tmp11_, GTK_STYLE_CLASS_PRIMARY_TOOLBAR);
	return;
}


static Block8Data* block8_data_ref (Block8Data* _data8_) {
	g_atomic_int_inc (&_data8_->_ref_count_);
	return _data8_;
}


static void block8_data_unref (void * _userdata_) {
	Block8Data* _data8_;
	_data8_ = (Block8Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data8_->_ref_count_)) {
		FontManagerTitleBar* self;
		self = _data8_->self;
		_g_object_unref0 (_data8_->application);
		_g_object_unref0 (self);
		g_slice_free (Block8Data, _data8_);
	}
}


static GVariant* _variant_new1 (const gchar* value) {
	return g_variant_ref_sink (g_variant_new_string (value));
}


static gchar* _variant_get2 (GVariant* value) {
	return g_variant_dup_string (value, NULL);
}


static void __lambda65_ (Block8Data* _data8_, GSimpleAction* a, GVariant* s) {
	FontManagerTitleBar* self;
	FontManagerApplication* _tmp0_ = NULL;
	FontManagerMainWindow* _tmp1_ = NULL;
	FontManagerMainWindow* _tmp2_ = NULL;
	GVariant* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	FontManagerMode _tmp6_ = 0;
	self = _data8_->self;
	g_return_if_fail (a != NULL);
	_tmp0_ = _data8_->application;
	_tmp1_ = font_manager_application_get_main_window (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = s;
	_tmp4_ = _variant_get2 (_tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = font_manager_mode_parse (_tmp5_);
	font_manager_main_window_set_mode (_tmp2_, _tmp6_);
	_g_free0 (_tmp5_);
}


static void ___lambda65__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda65_ (self, _sender, parameter);
}


static GVariant* _variant_new3 (gchar* value) {
	return g_variant_ref_sink (g_variant_new_string (value));
}


static GMenuModel* font_manager_title_bar_get_main_menu_model (FontManagerTitleBar* self) {
	GMenuModel* result = NULL;
	Block8Data* _data8_;
	GApplication* _tmp0_ = NULL;
	FontManagerApplication* _tmp1_ = NULL;
	GMenu* mode_section = NULL;
	GMenu* _tmp2_ = NULL;
	gchar** modes = NULL;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	gchar* _tmp6_ = NULL;
	gchar** _tmp7_ = NULL;
	gint modes_length1 = 0;
	gint _modes_size_ = 0;
	GSimpleAction* mode_action = NULL;
	const GVariantType* _tmp8_ = NULL;
	GVariant* _tmp9_ = NULL;
	GSimpleAction* _tmp10_ = NULL;
	GSimpleAction* _tmp11_ = NULL;
	GSimpleAction* _tmp12_ = NULL;
	FontManagerApplication* _tmp13_ = NULL;
	GSimpleAction* _tmp14_ = NULL;
	gint i = 0;
	gchar** _tmp15_ = NULL;
	gint _tmp15__length1 = 0;
	GMenu* _tmp41_ = NULL;
	GMenuModel* _tmp42_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_data8_ = g_slice_new0 (Block8Data);
	_data8_->_ref_count_ = 1;
	_data8_->self = g_object_ref (self);
	_tmp0_ = g_application_get_default ();
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, FONT_MANAGER_TYPE_APPLICATION, FontManagerApplication));
	_data8_->application = _tmp1_;
	_tmp2_ = g_menu_new ();
	mode_section = _tmp2_;
	_tmp3_ = g_strdup ("Default");
	_tmp4_ = g_strdup ("Browse");
	_tmp5_ = g_strdup ("Compare");
	_tmp6_ = g_strdup ("Character Map");
	_tmp7_ = g_new0 (gchar*, 4 + 1);
	_tmp7_[0] = _tmp3_;
	_tmp7_[1] = _tmp4_;
	_tmp7_[2] = _tmp5_;
	_tmp7_[3] = _tmp6_;
	modes = _tmp7_;
	modes_length1 = 4;
	_modes_size_ = modes_length1;
	_tmp8_ = G_VARIANT_TYPE_STRING;
	_tmp9_ = _variant_new1 ("Manage");
	_tmp10_ = g_simple_action_new_stateful ("mode", _tmp8_, _tmp9_);
	_tmp11_ = _tmp10_;
	_g_variant_unref0 (_tmp9_);
	mode_action = _tmp11_;
	_tmp12_ = mode_action;
	g_signal_connect_data (_tmp12_, "activate", (GCallback) ___lambda65__g_simple_action_activate, block8_data_ref (_data8_), (GClosureNotify) block8_data_unref, 0);
	_tmp13_ = _data8_->application;
	_tmp14_ = mode_action;
	g_action_map_add_action ((GActionMap*) _tmp13_, (GAction*) _tmp14_);
	i = 0;
	_tmp15_ = modes;
	_tmp15__length1 = modes_length1;
	{
		gchar** mode_collection = NULL;
		gint mode_collection_length1 = 0;
		gint _mode_collection_size_ = 0;
		gint mode_it = 0;
		mode_collection = _tmp15_;
		mode_collection_length1 = _tmp15__length1;
		for (mode_it = 0; mode_it < _tmp15__length1; mode_it = mode_it + 1) {
			gchar* _tmp16_ = NULL;
			gchar* mode = NULL;
			_tmp16_ = g_strdup (mode_collection[mode_it]);
			mode = _tmp16_;
			{
				gint _tmp17_ = 0;
				FontManagerApplication* _tmp18_ = NULL;
				gint _tmp19_ = 0;
				gchar* _tmp20_ = NULL;
				gchar* _tmp21_ = NULL;
				const gchar* _tmp22_ = NULL;
				gchar* _tmp23_ = NULL;
				gchar* _tmp24_ = NULL;
				GVariant* _tmp25_ = NULL;
				GMenuItem* item = NULL;
				const gchar* _tmp26_ = NULL;
				FontManagerMode _tmp27_ = 0;
				gchar* _tmp28_ = NULL;
				gchar* _tmp29_ = NULL;
				const gchar* _tmp30_ = NULL;
				gchar* _tmp31_ = NULL;
				gchar* _tmp32_ = NULL;
				GMenuItem* _tmp33_ = NULL;
				GMenuItem* _tmp34_ = NULL;
				GMenuItem* _tmp35_ = NULL;
				gint _tmp36_ = 0;
				gchar* _tmp37_ = NULL;
				gchar* _tmp38_ = NULL;
				GMenu* _tmp39_ = NULL;
				GMenuItem* _tmp40_ = NULL;
				_tmp17_ = i;
				i = _tmp17_ + 1;
				_tmp18_ = _data8_->application;
				_tmp19_ = i;
				_tmp20_ = g_strdup_printf ("<Ctrl>%i", _tmp19_);
				_tmp21_ = _tmp20_;
				_tmp22_ = mode;
				_tmp23_ = g_strdup_printf ("%s", _tmp22_);
				_tmp24_ = _tmp23_;
				_tmp25_ = _variant_new3 (_tmp24_);
				gtk_application_add_accelerator ((GtkApplication*) _tmp18_, _tmp21_, "app.mode", _tmp25_);
				_g_variant_unref0 (_tmp25_);
				_g_free0 (_tmp24_);
				_g_free0 (_tmp21_);
				_tmp26_ = mode;
				_tmp27_ = font_manager_mode_parse (_tmp26_);
				_tmp28_ = font_manager_mode_to_translatable_string (_tmp27_);
				_tmp29_ = _tmp28_;
				_tmp30_ = mode;
				_tmp31_ = g_strdup_printf ("app.mode::%s", _tmp30_);
				_tmp32_ = _tmp31_;
				_tmp33_ = g_menu_item_new (_tmp29_, _tmp32_);
				_tmp34_ = _tmp33_;
				_g_free0 (_tmp32_);
				_g_free0 (_tmp29_);
				item = _tmp34_;
				_tmp35_ = item;
				_tmp36_ = i;
				_tmp37_ = g_strdup_printf ("<Ctrl>%i", _tmp36_);
				_tmp38_ = _tmp37_;
				g_menu_item_set_attribute (_tmp35_, "accel", "s", _tmp38_, NULL);
				_g_free0 (_tmp38_);
				_tmp39_ = mode_section;
				_tmp40_ = item;
				g_menu_append_item (_tmp39_, _tmp40_);
				_g_object_unref0 (item);
				_g_free0 (mode);
			}
		}
	}
	_tmp41_ = mode_section;
	_tmp42_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp41_, g_menu_model_get_type (), GMenuModel));
	result = _tmp42_;
	_g_object_unref0 (mode_action);
	modes = (_vala_array_free (modes, modes_length1, (GDestroyNotify) g_free), NULL);
	_g_object_unref0 (mode_section);
	block8_data_unref (_data8_);
	_data8_ = NULL;
	return result;
}


static void _font_manager_application_help_menu_callback (gpointer self) {
	font_manager_application_help ((FontManagerApplication*) self);
}


static void _font_manager_application_about_menu_callback (gpointer self) {
	font_manager_application_about ((FontManagerApplication*) self);
}


static void _font_manager_application_quit_menu_callback (gpointer self) {
	font_manager_application_quit ((FontManagerApplication*) self);
}


static void _vala_MenuEntry_array_free (MenuEntry* array, gint array_length) {
	if (array != NULL) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			menu_entry_destroy (&array[i]);
		}
	}
	g_free (array);
}


static GMenuModel* font_manager_title_bar_get_app_menu_model (FontManagerTitleBar* self) {
	GMenuModel* result = NULL;
	FontManagerApplication* application = NULL;
	GApplication* _tmp0_ = NULL;
	FontManagerApplication* _tmp1_ = NULL;
	MenuEntry* app_menu_entries = NULL;
	const gchar* _tmp2_ = NULL;
	FontManagerApplication* _tmp3_ = NULL;
	MenuCallbackWrapper* _tmp4_ = NULL;
	MenuCallbackWrapper* _tmp5_ = NULL;
	MenuEntry _tmp6_ = {0};
	const gchar* _tmp7_ = NULL;
	FontManagerApplication* _tmp8_ = NULL;
	MenuCallbackWrapper* _tmp9_ = NULL;
	MenuCallbackWrapper* _tmp10_ = NULL;
	MenuEntry _tmp11_ = {0};
	const gchar* _tmp12_ = NULL;
	FontManagerApplication* _tmp13_ = NULL;
	MenuCallbackWrapper* _tmp14_ = NULL;
	MenuCallbackWrapper* _tmp15_ = NULL;
	MenuEntry _tmp16_ = {0};
	MenuEntry* _tmp17_ = NULL;
	MenuEntry* _tmp18_ = NULL;
	gint _tmp18__length1 = 0;
	gint app_menu_entries_length1 = 0;
	gint _app_menu_entries_size_ = 0;
	GMenu* app_menu = NULL;
	GMenu* _tmp19_ = NULL;
	MenuEntry* _tmp20_ = NULL;
	gint _tmp20__length1 = 0;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_application_get_default ();
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, FONT_MANAGER_TYPE_APPLICATION, FontManagerApplication));
	application = _tmp1_;
	_tmp2_ = _ ("Help");
	_tmp3_ = application;
	_tmp4_ = menu_callback_wrapper_new (_font_manager_application_help_menu_callback, _tmp3_);
	_tmp5_ = _tmp4_;
	menu_entry_init (&_tmp6_, "help", _tmp2_, "app.help", "F1", _tmp5_);
	_tmp7_ = _ ("About");
	_tmp8_ = application;
	_tmp9_ = menu_callback_wrapper_new (_font_manager_application_about_menu_callback, _tmp8_);
	_tmp10_ = _tmp9_;
	menu_entry_init (&_tmp11_, "about", _tmp7_, "app.about", NULL, _tmp10_);
	_tmp12_ = _ ("Quit");
	_tmp13_ = application;
	_tmp14_ = menu_callback_wrapper_new (_font_manager_application_quit_menu_callback, _tmp13_);
	_tmp15_ = _tmp14_;
	menu_entry_init (&_tmp16_, "quit", _tmp12_, "app.quit", "<Ctrl>Q", _tmp15_);
	_tmp17_ = g_new0 (MenuEntry, 3);
	_tmp17_[0] = _tmp6_;
	_tmp17_[1] = _tmp11_;
	_tmp17_[2] = _tmp16_;
	_tmp18_ = _tmp17_;
	_tmp18__length1 = 3;
	_menu_callback_wrapper_unref0 (_tmp15_);
	_menu_callback_wrapper_unref0 (_tmp10_);
	_menu_callback_wrapper_unref0 (_tmp5_);
	app_menu_entries = _tmp18_;
	app_menu_entries_length1 = _tmp18__length1;
	_app_menu_entries_size_ = app_menu_entries_length1;
	_tmp19_ = g_menu_new ();
	app_menu = _tmp19_;
	_tmp20_ = app_menu_entries;
	_tmp20__length1 = app_menu_entries_length1;
	{
		MenuEntry* entry_collection = NULL;
		gint entry_collection_length1 = 0;
		gint _entry_collection_size_ = 0;
		gint entry_it = 0;
		entry_collection = _tmp20_;
		entry_collection_length1 = _tmp20__length1;
		for (entry_it = 0; entry_it < _tmp20__length1; entry_it = entry_it + 1) {
			MenuEntry _tmp21_ = {0};
			MenuEntry entry = {0};
			menu_entry_copy (&entry_collection[entry_it], &_tmp21_);
			entry = _tmp21_;
			{
				FontManagerApplication* _tmp22_ = NULL;
				MenuEntry _tmp23_ = {0};
				MenuEntry _tmp24_ = {0};
				const gchar* _tmp25_ = NULL;
				_tmp22_ = application;
				_tmp23_ = entry;
				add_action_from_menu_entry ((GActionMap*) _tmp22_, &_tmp23_);
				_tmp24_ = entry;
				_tmp25_ = _tmp24_.accelerator;
				if (_tmp25_ != NULL) {
					FontManagerApplication* _tmp26_ = NULL;
					MenuEntry _tmp27_ = {0};
					const gchar* _tmp28_ = NULL;
					MenuEntry _tmp29_ = {0};
					const gchar* _tmp30_ = NULL;
					GMenuItem* item = NULL;
					MenuEntry _tmp31_ = {0};
					const gchar* _tmp32_ = NULL;
					MenuEntry _tmp33_ = {0};
					const gchar* _tmp34_ = NULL;
					GMenuItem* _tmp35_ = NULL;
					GMenuItem* _tmp36_ = NULL;
					MenuEntry _tmp37_ = {0};
					const gchar* _tmp38_ = NULL;
					GMenu* _tmp39_ = NULL;
					GMenuItem* _tmp40_ = NULL;
					_tmp26_ = application;
					_tmp27_ = entry;
					_tmp28_ = _tmp27_.accelerator;
					_tmp29_ = entry;
					_tmp30_ = _tmp29_.detailed_action_name;
					gtk_application_add_accelerator ((GtkApplication*) _tmp26_, _tmp28_, _tmp30_, NULL);
					_tmp31_ = entry;
					_tmp32_ = _tmp31_.display_name;
					_tmp33_ = entry;
					_tmp34_ = _tmp33_.detailed_action_name;
					_tmp35_ = g_menu_item_new (_tmp32_, _tmp34_);
					item = _tmp35_;
					_tmp36_ = item;
					_tmp37_ = entry;
					_tmp38_ = _tmp37_.accelerator;
					g_menu_item_set_attribute (_tmp36_, "accel", "s", _tmp38_, NULL);
					_tmp39_ = app_menu;
					_tmp40_ = item;
					g_menu_append_item (_tmp39_, _tmp40_);
					_g_object_unref0 (item);
				} else {
					GMenu* _tmp41_ = NULL;
					MenuEntry _tmp42_ = {0};
					const gchar* _tmp43_ = NULL;
					MenuEntry _tmp44_ = {0};
					const gchar* _tmp45_ = NULL;
					_tmp41_ = app_menu;
					_tmp42_ = entry;
					_tmp43_ = _tmp42_.display_name;
					_tmp44_ = entry;
					_tmp45_ = _tmp44_.detailed_action_name;
					g_menu_append (_tmp41_, _tmp43_, _tmp45_);
				}
				menu_entry_destroy (&entry);
			}
		}
	}
	result = (GMenuModel*) app_menu;
	app_menu_entries = (_vala_MenuEntry_array_free (app_menu_entries, app_menu_entries_length1), NULL);
	_g_object_unref0 (application);
	return result;
}


GtkMenuButton* font_manager_title_bar_get_main_menu (FontManagerTitleBar* self) {
	GtkMenuButton* result;
	GtkMenuButton* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_main_menu;
	result = _tmp0_;
	return result;
}


static void font_manager_title_bar_set_main_menu (FontManagerTitleBar* self, GtkMenuButton* value) {
	GtkMenuButton* _tmp0_ = NULL;
	GtkMenuButton* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_main_menu);
	self->priv->_main_menu = _tmp1_;
	g_object_notify ((GObject *) self, "main-menu");
}


GtkLabel* font_manager_title_bar_get_main_menu_label (FontManagerTitleBar* self) {
	GtkLabel* result;
	GtkLabel* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_main_menu_label;
	result = _tmp0_;
	return result;
}


void font_manager_title_bar_set_main_menu_label (FontManagerTitleBar* self, GtkLabel* value) {
	GtkLabel* _tmp0_ = NULL;
	GtkLabel* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_main_menu_label);
	self->priv->_main_menu_label = _tmp1_;
	g_object_notify ((GObject *) self, "main-menu-label");
}


GtkMenuButton* font_manager_title_bar_get_app_menu (FontManagerTitleBar* self) {
	GtkMenuButton* result;
	GtkMenuButton* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_app_menu;
	result = _tmp0_;
	return result;
}


static void font_manager_title_bar_set_app_menu (FontManagerTitleBar* self, GtkMenuButton* value) {
	GtkMenuButton* _tmp0_ = NULL;
	GtkMenuButton* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_app_menu);
	self->priv->_app_menu = _tmp1_;
	g_object_notify ((GObject *) self, "app-menu");
}


GtkToggleButton* font_manager_title_bar_get_source_toggle (FontManagerTitleBar* self) {
	GtkToggleButton* result;
	GtkToggleButton* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_source_toggle;
	result = _tmp0_;
	return result;
}


static void font_manager_title_bar_set_source_toggle (FontManagerTitleBar* self, GtkToggleButton* value) {
	GtkToggleButton* _tmp0_ = NULL;
	GtkToggleButton* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_source_toggle);
	self->priv->_source_toggle = _tmp1_;
	g_object_notify ((GObject *) self, "source-toggle");
}


static void font_manager_title_bar_class_init (FontManagerTitleBarClass * klass) {
	font_manager_title_bar_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (FontManagerTitleBarPrivate));
	((GtkWidgetClass *) klass)->show = font_manager_title_bar_real_show;
	G_OBJECT_CLASS (klass)->get_property = _vala_font_manager_title_bar_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_font_manager_title_bar_set_property;
	G_OBJECT_CLASS (klass)->finalize = font_manager_title_bar_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), FONT_MANAGER_TITLE_BAR_MAIN_MENU, g_param_spec_object ("main-menu", "main-menu", "main-menu", gtk_menu_button_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), FONT_MANAGER_TITLE_BAR_MAIN_MENU_LABEL, g_param_spec_object ("main-menu-label", "main-menu-label", "main-menu-label", gtk_label_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), FONT_MANAGER_TITLE_BAR_APP_MENU, g_param_spec_object ("app-menu", "app-menu", "app-menu", gtk_menu_button_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), FONT_MANAGER_TITLE_BAR_SOURCE_TOGGLE, g_param_spec_object ("source-toggle", "source-toggle", "source-toggle", gtk_toggle_button_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_signal_new ("install_selected", FONT_MANAGER_TYPE_TITLE_BAR, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("remove_selected", FONT_MANAGER_TYPE_TITLE_BAR, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("add_selected", FONT_MANAGER_TYPE_TITLE_BAR, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("manage_sources", FONT_MANAGER_TYPE_TITLE_BAR, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__BOOLEAN, G_TYPE_NONE, 1, G_TYPE_BOOLEAN);
}


static void font_manager_title_bar_instance_init (FontManagerTitleBar * self) {
	self->priv = FONT_MANAGER_TITLE_BAR_GET_PRIVATE (self);
}


static void font_manager_title_bar_finalize (GObject* obj) {
	FontManagerTitleBar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, FONT_MANAGER_TYPE_TITLE_BAR, FontManagerTitleBar);
	_g_object_unref0 (self->priv->_main_menu);
	_g_object_unref0 (self->priv->_main_menu_label);
	_g_object_unref0 (self->priv->_app_menu);
	_g_object_unref0 (self->priv->_source_toggle);
	_g_object_unref0 (self->priv->manage_controls);
	_g_object_unref0 (self->priv->revealer);
	_g_object_unref0 (self->priv->main_menu_icon);
	_g_object_unref0 (self->priv->app_menu_icon);
	_g_object_unref0 (self->priv->main_menu_container);
	G_OBJECT_CLASS (font_manager_title_bar_parent_class)->finalize (obj);
}


GType font_manager_title_bar_get_type (void) {
	static volatile gsize font_manager_title_bar_type_id__volatile = 0;
	if (g_once_init_enter (&font_manager_title_bar_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (FontManagerTitleBarClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) font_manager_title_bar_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (FontManagerTitleBar), 0, (GInstanceInitFunc) font_manager_title_bar_instance_init, NULL };
		GType font_manager_title_bar_type_id;
		font_manager_title_bar_type_id = g_type_register_static (gtk_header_bar_get_type (), "FontManagerTitleBar", &g_define_type_info, 0);
		g_once_init_leave (&font_manager_title_bar_type_id__volatile, font_manager_title_bar_type_id);
	}
	return font_manager_title_bar_type_id__volatile;
}


static void _vala_font_manager_title_bar_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	FontManagerTitleBar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, FONT_MANAGER_TYPE_TITLE_BAR, FontManagerTitleBar);
	switch (property_id) {
		case FONT_MANAGER_TITLE_BAR_MAIN_MENU:
		g_value_set_object (value, font_manager_title_bar_get_main_menu (self));
		break;
		case FONT_MANAGER_TITLE_BAR_MAIN_MENU_LABEL:
		g_value_set_object (value, font_manager_title_bar_get_main_menu_label (self));
		break;
		case FONT_MANAGER_TITLE_BAR_APP_MENU:
		g_value_set_object (value, font_manager_title_bar_get_app_menu (self));
		break;
		case FONT_MANAGER_TITLE_BAR_SOURCE_TOGGLE:
		g_value_set_object (value, font_manager_title_bar_get_source_toggle (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_font_manager_title_bar_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	FontManagerTitleBar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, FONT_MANAGER_TYPE_TITLE_BAR, FontManagerTitleBar);
	switch (property_id) {
		case FONT_MANAGER_TITLE_BAR_MAIN_MENU:
		font_manager_title_bar_set_main_menu (self, g_value_get_object (value));
		break;
		case FONT_MANAGER_TITLE_BAR_MAIN_MENU_LABEL:
		font_manager_title_bar_set_main_menu_label (self, g_value_get_object (value));
		break;
		case FONT_MANAGER_TITLE_BAR_APP_MENU:
		font_manager_title_bar_set_app_menu (self, g_value_get_object (value));
		break;
		case FONT_MANAGER_TITLE_BAR_SOURCE_TOGGLE:
		font_manager_title_bar_set_source_toggle (self, g_value_get_object (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



