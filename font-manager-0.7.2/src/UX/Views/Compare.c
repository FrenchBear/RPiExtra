/* Compare.c generated by valac 0.26.1, the Vala compiler
 * generated from Compare.vala, do not modify */

/* Compare.vala
 *
 * Copyright (C) 2009 - 2015 Jerry Casiano
 *
 * This file is part of Font Manager.
 *
 * Font Manager is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Font Manager is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Font Manager.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Author:
 *        Jerry Casiano <JerryCasiano@gmail.com>
*/

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>
#include <pango/pango.h>
#include <gdk/gdk.h>


#define FONT_MANAGER_TYPE_ADJUSTABLE_PREVIEW (font_manager_adjustable_preview_get_type ())
#define FONT_MANAGER_ADJUSTABLE_PREVIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FONT_MANAGER_TYPE_ADJUSTABLE_PREVIEW, FontManagerAdjustablePreview))
#define FONT_MANAGER_ADJUSTABLE_PREVIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FONT_MANAGER_TYPE_ADJUSTABLE_PREVIEW, FontManagerAdjustablePreviewClass))
#define FONT_MANAGER_IS_ADJUSTABLE_PREVIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FONT_MANAGER_TYPE_ADJUSTABLE_PREVIEW))
#define FONT_MANAGER_IS_ADJUSTABLE_PREVIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FONT_MANAGER_TYPE_ADJUSTABLE_PREVIEW))
#define FONT_MANAGER_ADJUSTABLE_PREVIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FONT_MANAGER_TYPE_ADJUSTABLE_PREVIEW, FontManagerAdjustablePreviewClass))

typedef struct _FontManagerAdjustablePreview FontManagerAdjustablePreview;
typedef struct _FontManagerAdjustablePreviewClass FontManagerAdjustablePreviewClass;
typedef struct _FontManagerAdjustablePreviewPrivate FontManagerAdjustablePreviewPrivate;

#define FONT_MANAGER_TYPE_FONT_SCALE (font_manager_font_scale_get_type ())
#define FONT_MANAGER_FONT_SCALE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FONT_MANAGER_TYPE_FONT_SCALE, FontManagerFontScale))
#define FONT_MANAGER_FONT_SCALE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FONT_MANAGER_TYPE_FONT_SCALE, FontManagerFontScaleClass))
#define FONT_MANAGER_IS_FONT_SCALE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FONT_MANAGER_TYPE_FONT_SCALE))
#define FONT_MANAGER_IS_FONT_SCALE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FONT_MANAGER_TYPE_FONT_SCALE))
#define FONT_MANAGER_FONT_SCALE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FONT_MANAGER_TYPE_FONT_SCALE, FontManagerFontScaleClass))

typedef struct _FontManagerFontScale FontManagerFontScale;
typedef struct _FontManagerFontScaleClass FontManagerFontScaleClass;

#define FONT_MANAGER_TYPE_COMPARE (font_manager_compare_get_type ())
#define FONT_MANAGER_COMPARE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FONT_MANAGER_TYPE_COMPARE, FontManagerCompare))
#define FONT_MANAGER_COMPARE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FONT_MANAGER_TYPE_COMPARE, FontManagerCompareClass))
#define FONT_MANAGER_IS_COMPARE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FONT_MANAGER_TYPE_COMPARE))
#define FONT_MANAGER_IS_COMPARE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FONT_MANAGER_TYPE_COMPARE))
#define FONT_MANAGER_COMPARE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FONT_MANAGER_TYPE_COMPARE, FontManagerCompareClass))

typedef struct _FontManagerCompare FontManagerCompare;
typedef struct _FontManagerCompareClass FontManagerCompareClass;
typedef struct _FontManagerComparePrivate FontManagerComparePrivate;

#define TYPE_BASE_TREE_VIEW (base_tree_view_get_type ())
#define BASE_TREE_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_BASE_TREE_VIEW, BaseTreeView))
#define BASE_TREE_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_BASE_TREE_VIEW, BaseTreeViewClass))
#define IS_BASE_TREE_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_BASE_TREE_VIEW))
#define IS_BASE_TREE_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_BASE_TREE_VIEW))
#define BASE_TREE_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_BASE_TREE_VIEW, BaseTreeViewClass))

typedef struct _BaseTreeView BaseTreeView;
typedef struct _BaseTreeViewClass BaseTreeViewClass;

#define FONT_MANAGER_TYPE_BASE_CONTROLS (font_manager_base_controls_get_type ())
#define FONT_MANAGER_BASE_CONTROLS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FONT_MANAGER_TYPE_BASE_CONTROLS, FontManagerBaseControls))
#define FONT_MANAGER_BASE_CONTROLS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FONT_MANAGER_TYPE_BASE_CONTROLS, FontManagerBaseControlsClass))
#define FONT_MANAGER_IS_BASE_CONTROLS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FONT_MANAGER_TYPE_BASE_CONTROLS))
#define FONT_MANAGER_IS_BASE_CONTROLS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FONT_MANAGER_TYPE_BASE_CONTROLS))
#define FONT_MANAGER_BASE_CONTROLS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FONT_MANAGER_TYPE_BASE_CONTROLS, FontManagerBaseControlsClass))

typedef struct _FontManagerBaseControls FontManagerBaseControls;
typedef struct _FontManagerBaseControlsClass FontManagerBaseControlsClass;

#define FONT_MANAGER_TYPE_COMPARE_CONTROLS (font_manager_compare_controls_get_type ())
#define FONT_MANAGER_COMPARE_CONTROLS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FONT_MANAGER_TYPE_COMPARE_CONTROLS, FontManagerCompareControls))
#define FONT_MANAGER_COMPARE_CONTROLS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FONT_MANAGER_TYPE_COMPARE_CONTROLS, FontManagerCompareControlsClass))
#define FONT_MANAGER_IS_COMPARE_CONTROLS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FONT_MANAGER_TYPE_COMPARE_CONTROLS))
#define FONT_MANAGER_IS_COMPARE_CONTROLS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FONT_MANAGER_TYPE_COMPARE_CONTROLS))
#define FONT_MANAGER_COMPARE_CONTROLS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FONT_MANAGER_TYPE_COMPARE_CONTROLS, FontManagerCompareControlsClass))

typedef struct _FontManagerCompareControls FontManagerCompareControls;
typedef struct _FontManagerCompareControlsClass FontManagerCompareControlsClass;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define __vala_PangoFontDescription_free0(var) ((var == NULL) ? NULL : (var = (_vala_PangoFontDescription_free (var), NULL)))
#define _gtk_tree_path_free0(var) ((var == NULL) ? NULL : (var = (gtk_tree_path_free (var), NULL)))
typedef struct _Block16Data Block16Data;
typedef struct _Block17Data Block17Data;

struct _FontManagerAdjustablePreview {
	GtkBox parent_instance;
	FontManagerAdjustablePreviewPrivate * priv;
	gdouble _preview_size;
	FontManagerFontScale* fontscale;
};

struct _FontManagerAdjustablePreviewClass {
	GtkBoxClass parent_class;
	void (*set_preview_size_internal) (FontManagerAdjustablePreview* self, gdouble new_size);
	void (*init) (FontManagerAdjustablePreview* self);
};

struct _FontManagerCompare {
	FontManagerAdjustablePreview parent_instance;
	FontManagerComparePrivate * priv;
};

struct _FontManagerCompareClass {
	FontManagerAdjustablePreviewClass parent_class;
};

struct _FontManagerComparePrivate {
	gchar* _preview_text;
	gchar* default_preview_text;
	GtkBox* box;
	BaseTreeView* tree;
	GtkListStore* store;
	GtkScrolledWindow* scroll;
	GtkTreeViewColumn* column;
	GtkCellRendererText* renderer;
	PangoFontDescription* _font_desc;
	FontManagerCompareControls* controls;
	GdkRGBA default_fg_color;
	GdkRGBA default_bg_color;
};

struct _Block16Data {
	int _ref_count_;
	FontManagerCompare* self;
	GtkTreePath* p;
};

struct _Block17Data {
	int _ref_count_;
	FontManagerCompare* self;
	gchar** results;
	gint results_length1;
	gint _results_size_;
};


static gpointer font_manager_compare_parent_class = NULL;

GType font_manager_adjustable_preview_get_type (void) G_GNUC_CONST;
GType font_manager_font_scale_get_type (void) G_GNUC_CONST;
GType font_manager_compare_get_type (void) G_GNUC_CONST;
GType base_tree_view_get_type (void) G_GNUC_CONST;
GType font_manager_base_controls_get_type (void) G_GNUC_CONST;
GType font_manager_compare_controls_get_type (void) G_GNUC_CONST;
#define FONT_MANAGER_COMPARE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), FONT_MANAGER_TYPE_COMPARE, FontManagerComparePrivate))
enum  {
	FONT_MANAGER_COMPARE_DUMMY_PROPERTY,
	FONT_MANAGER_COMPARE_FOREGROUND_COLOR,
	FONT_MANAGER_COMPARE_BACKGROUND_COLOR,
	FONT_MANAGER_COMPARE_PREVIEW_TEXT,
	FONT_MANAGER_COMPARE_FONT_DESC
};
static void _vala_PangoFontDescription_free (PangoFontDescription* self);
FontManagerCompare* font_manager_compare_new (void);
FontManagerCompare* font_manager_compare_construct (GType object_type);
FontManagerAdjustablePreview* font_manager_adjustable_preview_construct (GType object_type);
void font_manager_adjustable_preview_init (FontManagerAdjustablePreview* self);
gchar* get_localized_pangram (void);
void font_manager_compare_set_preview_text (FontManagerCompare* self, const gchar* value);
BaseTreeView* base_tree_view_new (void);
BaseTreeView* base_tree_view_construct (GType object_type);
FontManagerCompareControls* font_manager_compare_controls_new (void);
FontManagerCompareControls* font_manager_compare_controls_construct (GType object_type);
static void font_manager_compare_update_default_colors (FontManagerCompare* self);
static void font_manager_compare_cell_data_func (FontManagerCompare* self, GtkCellLayout* layout, GtkCellRenderer* cell, GtkTreeModel* model, GtkTreeIter* treeiter);
static void _font_manager_compare_cell_data_func_gtk_cell_layout_data_func (GtkCellLayout* cell_layout, GtkCellRenderer* cell, GtkTreeModel* tree_model, GtkTreeIter* iter, gpointer self);
void font_manager_font_scale_add_style_class (FontManagerFontScale* self, const gchar* gtk_style_class);
GtkSeparator* add_separator (GtkBox* box, GtkOrientation orientation, GtkPackType pack_type);
static void font_manager_compare_connect_signals (FontManagerCompare* self);
static void font_manager_compare_real_show (GtkWidget* base);
static gboolean __lambda12_ (FontManagerCompare* self, GtkTreeSelection* s, GtkTreeModel* m, GtkTreePath* p, gboolean csp);
static Block16Data* block16_data_ref (Block16Data* _data16_);
static void block16_data_unref (void * _userdata_);
static gboolean ___lambda13_ (Block16Data* _data16_);
static gboolean ____lambda13__gsource_func (gpointer self);
static gboolean ___lambda12__gtk_tree_selection_func (GtkTreeSelection* selection, GtkTreeModel* model, GtkTreePath* path, gboolean path_currently_selected, gpointer self);
static void __lambda14_ (FontManagerCompare* self);
void font_manager_compare_add_from_string (FontManagerCompare* self, const gchar* font_desc);
PangoFontDescription* font_manager_compare_get_font_desc (FontManagerCompare* self);
static void ___lambda14__font_manager_base_controls_add_selected (FontManagerBaseControls* _sender, gpointer self);
static void __lambda15_ (FontManagerCompare* self);
static void font_manager_compare_on_remove (FontManagerCompare* self);
static void ___lambda15__font_manager_base_controls_remove_selected (FontManagerBaseControls* _sender, gpointer self);
static void __lambda16_ (FontManagerCompare* self, GdkRGBA* rgba);
void font_manager_compare_set_foreground_color (FontManagerCompare* self, GdkRGBA* value);
static void ___lambda16__font_manager_compare_controls_foreground_set (FontManagerCompareControls* _sender, GdkRGBA* fg_color, gpointer self);
static void __lambda17_ (FontManagerCompare* self, GdkRGBA* rgba);
void font_manager_compare_set_background_color (FontManagerCompare* self, GdkRGBA* value);
static void ___lambda17__font_manager_compare_controls_background_set (FontManagerCompareControls* _sender, GdkRGBA* bg_color, gpointer self);
static void __lambda18_ (FontManagerCompare* self);
static void ___lambda18__gtk_widget_style_updated (GtkWidget* _sender, gpointer self);
static void font_manager_compare_real_set_preview_size_internal (FontManagerAdjustablePreview* base, gdouble new_size);
gdouble font_manager_adjustable_preview_get_desc_size (FontManagerAdjustablePreview* self);
void font_manager_compare_get_foreground_color (FontManagerCompare* self, GdkRGBA* result);
void font_manager_compare_get_background_color (FontManagerCompare* self, GdkRGBA* result);
const gchar* font_manager_compare_get_preview_text (FontManagerCompare* self);
gdouble font_manager_adjustable_preview_get_preview_size (FontManagerAdjustablePreview* self);
gchar** font_manager_compare_list (FontManagerCompare* self, int* result_length1);
static Block17Data* block17_data_ref (Block17Data* _data17_);
static void block17_data_unref (void * _userdata_);
static gboolean __lambda19_ (Block17Data* _data17_, GtkTreeModel* m, GtkTreePath* p, GtkTreeIter* i);
static void _vala_array_add11 (gchar*** array, int* length, int* size, gchar* value);
static gboolean ___lambda19__gtk_tree_model_foreach_func (GtkTreeModel* model, GtkTreePath* path, GtkTreeIter* iter, gpointer self);
static void _vala_array_add12 (gchar*** array, int* length, int* size, gchar* value);
static gchar** _vala_array_dup3 (gchar** self, int length);
GtkColorButton* font_manager_compare_controls_get_fg_color_button (FontManagerCompareControls* self);
GtkColorButton* font_manager_compare_controls_get_bg_color_button (FontManagerCompareControls* self);
void font_manager_compare_set_font_desc (FontManagerCompare* self, PangoFontDescription* value);
static PangoFontDescription* _vala_PangoFontDescription_copy (PangoFontDescription* self);
static void font_manager_compare_finalize (GObject* obj);
static void _vala_font_manager_compare_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_font_manager_compare_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);


static void _vala_PangoFontDescription_free (PangoFontDescription* self) {
	g_boxed_free (pango_font_description_get_type (), self);
}


static void _font_manager_compare_cell_data_func_gtk_cell_layout_data_func (GtkCellLayout* cell_layout, GtkCellRenderer* cell, GtkTreeModel* tree_model, GtkTreeIter* iter, gpointer self) {
	font_manager_compare_cell_data_func ((FontManagerCompare*) self, cell_layout, cell, tree_model, iter);
}


FontManagerCompare* font_manager_compare_construct (GType object_type) {
	FontManagerCompare * self = NULL;
	gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	BaseTreeView* _tmp2_ = NULL;
	BaseTreeView* _tmp3_ = NULL;
	GtkListStore* _tmp4_ = NULL;
	GtkScrolledWindow* _tmp5_ = NULL;
	FontManagerCompareControls* _tmp6_ = NULL;
	FontManagerCompareControls* _tmp7_ = NULL;
	GtkStyleContext* _tmp8_ = NULL;
	GtkCellRendererText* _tmp9_ = NULL;
	GtkTreeViewColumn* _tmp10_ = NULL;
	GtkTreeViewColumn* _tmp11_ = NULL;
	GtkCellRendererText* _tmp12_ = NULL;
	GtkTreeViewColumn* _tmp13_ = NULL;
	GtkCellRendererText* _tmp14_ = NULL;
	GtkTreeViewColumn* _tmp15_ = NULL;
	GtkCellRendererText* _tmp16_ = NULL;
	BaseTreeView* _tmp17_ = NULL;
	GtkTreeViewColumn* _tmp18_ = NULL;
	BaseTreeView* _tmp19_ = NULL;
	GtkListStore* _tmp20_ = NULL;
	BaseTreeView* _tmp21_ = NULL;
	FontManagerFontScale* _tmp22_ = NULL;
	FontManagerCompareControls* _tmp23_ = NULL;
	GtkSeparator* _tmp24_ = NULL;
	GtkSeparator* _tmp25_ = NULL;
	GtkBox* _tmp26_ = NULL;
	GtkBox* _tmp27_ = NULL;
	FontManagerFontScale* _tmp28_ = NULL;
	GtkScrolledWindow* _tmp29_ = NULL;
	BaseTreeView* _tmp30_ = NULL;
	GtkBox* _tmp31_ = NULL;
	GtkScrolledWindow* _tmp32_ = NULL;
	GtkBox* _tmp33_ = NULL;
	BaseTreeView* _tmp34_ = NULL;
	self = (FontManagerCompare*) font_manager_adjustable_preview_construct (object_type);
	FONT_MANAGER_ADJUSTABLE_PREVIEW_CLASS (font_manager_compare_parent_class)->init (G_TYPE_CHECK_INSTANCE_CAST (self, FONT_MANAGER_TYPE_ADJUSTABLE_PREVIEW, FontManagerAdjustablePreview));
	gtk_orientable_set_orientation ((GtkOrientable*) self, GTK_ORIENTATION_VERTICAL);
	_tmp0_ = get_localized_pangram ();
	_g_free0 (self->priv->default_preview_text);
	self->priv->default_preview_text = _tmp0_;
	_tmp1_ = self->priv->default_preview_text;
	font_manager_compare_set_preview_text (self, _tmp1_);
	_tmp2_ = base_tree_view_new ();
	g_object_ref_sink (_tmp2_);
	_g_object_unref0 (self->priv->tree);
	self->priv->tree = _tmp2_;
	_tmp3_ = self->priv->tree;
	gtk_widget_set_name ((GtkWidget*) _tmp3_, "FontManagerCompareView");
	_tmp4_ = gtk_list_store_new (2, pango_font_description_get_type (), G_TYPE_STRING, -1);
	_g_object_unref0 (self->priv->store);
	self->priv->store = _tmp4_;
	_tmp5_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp5_);
	_g_object_unref0 (self->priv->scroll);
	self->priv->scroll = _tmp5_;
	_tmp6_ = font_manager_compare_controls_new ();
	g_object_ref_sink (_tmp6_);
	_g_object_unref0 (self->priv->controls);
	self->priv->controls = _tmp6_;
	_tmp7_ = self->priv->controls;
	_tmp8_ = gtk_widget_get_style_context ((GtkWidget*) _tmp7_);
	gtk_style_context_add_class (_tmp8_, GTK_STYLE_CLASS_VIEW);
	font_manager_compare_update_default_colors (self);
	_tmp9_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
	g_object_ref_sink (_tmp9_);
	_g_object_unref0 (self->priv->renderer);
	self->priv->renderer = _tmp9_;
	_tmp10_ = gtk_tree_view_column_new ();
	g_object_ref_sink (_tmp10_);
	_g_object_unref0 (self->priv->column);
	self->priv->column = _tmp10_;
	_tmp11_ = self->priv->column;
	_tmp12_ = self->priv->renderer;
	gtk_cell_layout_pack_start ((GtkCellLayout*) _tmp11_, (GtkCellRenderer*) _tmp12_, TRUE);
	_tmp13_ = self->priv->column;
	_tmp14_ = self->priv->renderer;
	gtk_cell_layout_set_cell_data_func ((GtkCellLayout*) _tmp13_, (GtkCellRenderer*) _tmp14_, _font_manager_compare_cell_data_func_gtk_cell_layout_data_func, g_object_ref (self), g_object_unref);
	_tmp15_ = self->priv->column;
	_tmp16_ = self->priv->renderer;
	gtk_tree_view_column_set_attributes (_tmp15_, (GtkCellRenderer*) _tmp16_, "font-desc", 0, "text", 1, NULL, NULL);
	_tmp17_ = self->priv->tree;
	_tmp18_ = self->priv->column;
	gtk_tree_view_append_column ((GtkTreeView*) _tmp17_, _tmp18_);
	_tmp19_ = self->priv->tree;
	_tmp20_ = self->priv->store;
	gtk_tree_view_set_model ((GtkTreeView*) _tmp19_, (GtkTreeModel*) _tmp20_);
	_tmp21_ = self->priv->tree;
	gtk_tree_view_set_tooltip_column ((GtkTreeView*) _tmp21_, 1);
	_tmp22_ = ((FontManagerAdjustablePreview*) self)->fontscale;
	font_manager_font_scale_add_style_class (_tmp22_, GTK_STYLE_CLASS_VIEW);
	_tmp23_ = self->priv->controls;
	gtk_box_pack_start ((GtkBox*) self, (GtkWidget*) _tmp23_, FALSE, FALSE, (guint) 0);
	_tmp24_ = add_separator ((GtkBox*) self, GTK_ORIENTATION_HORIZONTAL, GTK_PACK_START);
	_tmp25_ = _tmp24_;
	_g_object_unref0 (_tmp25_);
	_tmp26_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	g_object_ref_sink (_tmp26_);
	_g_object_unref0 (self->priv->box);
	self->priv->box = _tmp26_;
	_tmp27_ = self->priv->box;
	_tmp28_ = ((FontManagerAdjustablePreview*) self)->fontscale;
	gtk_box_pack_end (_tmp27_, (GtkWidget*) _tmp28_, FALSE, FALSE, (guint) 0);
	_tmp29_ = self->priv->scroll;
	_tmp30_ = self->priv->tree;
	gtk_container_add ((GtkContainer*) _tmp29_, (GtkWidget*) _tmp30_);
	_tmp31_ = self->priv->box;
	_tmp32_ = self->priv->scroll;
	gtk_box_pack_start (_tmp31_, (GtkWidget*) _tmp32_, TRUE, TRUE, (guint) 0);
	_tmp33_ = self->priv->box;
	gtk_box_pack_end ((GtkBox*) self, (GtkWidget*) _tmp33_, TRUE, TRUE, (guint) 0);
	_tmp34_ = self->priv->tree;
	gtk_tree_view_set_headers_visible ((GtkTreeView*) _tmp34_, FALSE);
	font_manager_compare_connect_signals (self);
	return self;
}


FontManagerCompare* font_manager_compare_new (void) {
	return font_manager_compare_construct (FONT_MANAGER_TYPE_COMPARE);
}


static void font_manager_compare_real_show (GtkWidget* base) {
	FontManagerCompare * self;
	FontManagerFontScale* _tmp0_ = NULL;
	BaseTreeView* _tmp1_ = NULL;
	GtkScrolledWindow* _tmp2_ = NULL;
	GtkBox* _tmp3_ = NULL;
	FontManagerCompareControls* _tmp4_ = NULL;
	self = (FontManagerCompare*) base;
	_tmp0_ = ((FontManagerAdjustablePreview*) self)->fontscale;
	gtk_widget_show ((GtkWidget*) _tmp0_);
	_tmp1_ = self->priv->tree;
	gtk_widget_show ((GtkWidget*) _tmp1_);
	_tmp2_ = self->priv->scroll;
	gtk_widget_show ((GtkWidget*) _tmp2_);
	_tmp3_ = self->priv->box;
	gtk_widget_show ((GtkWidget*) _tmp3_);
	_tmp4_ = self->priv->controls;
	gtk_widget_show ((GtkWidget*) _tmp4_);
	GTK_WIDGET_CLASS (font_manager_compare_parent_class)->show ((GtkWidget*) G_TYPE_CHECK_INSTANCE_CAST (self, FONT_MANAGER_TYPE_ADJUSTABLE_PREVIEW, FontManagerAdjustablePreview));
	return;
}


static gpointer _gtk_tree_path_copy0 (gpointer self) {
	return self ? gtk_tree_path_copy (self) : NULL;
}


static Block16Data* block16_data_ref (Block16Data* _data16_) {
	g_atomic_int_inc (&_data16_->_ref_count_);
	return _data16_;
}


static void block16_data_unref (void * _userdata_) {
	Block16Data* _data16_;
	_data16_ = (Block16Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data16_->_ref_count_)) {
		FontManagerCompare* self;
		self = _data16_->self;
		_gtk_tree_path_free0 (_data16_->p);
		_g_object_unref0 (self);
		g_slice_free (Block16Data, _data16_);
	}
}


static gboolean ___lambda13_ (Block16Data* _data16_) {
	FontManagerCompare* self;
	gboolean result = FALSE;
	GtkTreePath* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	self = _data16_->self;
	_tmp0_ = _data16_->p;
	_tmp1_ = gtk_tree_path_prev (_tmp0_);
	if (_tmp1_) {
		BaseTreeView* _tmp2_ = NULL;
		GtkTreeSelection* _tmp3_ = NULL;
		GtkTreePath* _tmp4_ = NULL;
		_tmp2_ = self->priv->tree;
		_tmp3_ = gtk_tree_view_get_selection ((GtkTreeView*) _tmp2_);
		_tmp4_ = _data16_->p;
		gtk_tree_selection_select_path (_tmp3_, _tmp4_);
	}
	result = FALSE;
	return result;
}


static gboolean ____lambda13__gsource_func (gpointer self) {
	gboolean result;
	result = ___lambda13_ (self);
	return result;
}


static gboolean __lambda12_ (FontManagerCompare* self, GtkTreeSelection* s, GtkTreeModel* m, GtkTreePath* p, gboolean csp) {
	gboolean result = FALSE;
	Block16Data* _data16_;
	GtkTreePath* _tmp0_ = NULL;
	GtkTreePath* _tmp1_ = NULL;
	GtkTreePath* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	gint* _tmp4_ = NULL;
	gint _tmp5_ = 0;
	g_return_val_if_fail (s != NULL, FALSE);
	g_return_val_if_fail (m != NULL, FALSE);
	g_return_val_if_fail (p != NULL, FALSE);
	_data16_ = g_slice_new0 (Block16Data);
	_data16_->_ref_count_ = 1;
	_data16_->self = g_object_ref (self);
	_tmp0_ = p;
	_tmp1_ = _gtk_tree_path_copy0 (_tmp0_);
	_gtk_tree_path_free0 (_data16_->p);
	_data16_->p = _tmp1_;
	_tmp2_ = _data16_->p;
	_tmp4_ = gtk_tree_path_get_indices_with_depth (_tmp2_, &_tmp3_);
	_tmp5_ = _tmp4_[0];
	if ((_tmp5_ % 2) == 0) {
		result = TRUE;
		block16_data_unref (_data16_);
		_data16_ = NULL;
		return result;
	} else {
		g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ____lambda13__gsource_func, block16_data_ref (_data16_), block16_data_unref);
	}
	result = FALSE;
	block16_data_unref (_data16_);
	_data16_ = NULL;
	return result;
}


static gboolean ___lambda12__gtk_tree_selection_func (GtkTreeSelection* selection, GtkTreeModel* model, GtkTreePath* path, gboolean path_currently_selected, gpointer self) {
	gboolean result;
	result = __lambda12_ ((FontManagerCompare*) self, selection, model, path, path_currently_selected);
	return result;
}


static void __lambda14_ (FontManagerCompare* self) {
	PangoFontDescription* _tmp0_ = NULL;
	PangoFontDescription* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	_tmp0_ = font_manager_compare_get_font_desc (self);
	_tmp1_ = _tmp0_;
	_tmp2_ = pango_font_description_to_string (_tmp1_);
	_tmp3_ = _tmp2_;
	font_manager_compare_add_from_string (self, _tmp3_);
	_g_free0 (_tmp3_);
	g_signal_emit_by_name (self, "list-modified");
}


static void ___lambda14__font_manager_base_controls_add_selected (FontManagerBaseControls* _sender, gpointer self) {
	__lambda14_ ((FontManagerCompare*) self);
}


static void __lambda15_ (FontManagerCompare* self) {
	font_manager_compare_on_remove (self);
}


static void ___lambda15__font_manager_base_controls_remove_selected (FontManagerBaseControls* _sender, gpointer self) {
	__lambda15_ ((FontManagerCompare*) self);
}


static void __lambda16_ (FontManagerCompare* self, GdkRGBA* rgba) {
	GdkRGBA _tmp0_ = {0};
	g_return_if_fail (rgba != NULL);
	_tmp0_ = *rgba;
	font_manager_compare_set_foreground_color (self, &_tmp0_);
	g_signal_emit_by_name (self, "color-set");
}


static void ___lambda16__font_manager_compare_controls_foreground_set (FontManagerCompareControls* _sender, GdkRGBA* fg_color, gpointer self) {
	__lambda16_ ((FontManagerCompare*) self, fg_color);
}


static void __lambda17_ (FontManagerCompare* self, GdkRGBA* rgba) {
	GdkRGBA _tmp0_ = {0};
	g_return_if_fail (rgba != NULL);
	_tmp0_ = *rgba;
	font_manager_compare_set_background_color (self, &_tmp0_);
	g_signal_emit_by_name (self, "color-set");
}


static void ___lambda17__font_manager_compare_controls_background_set (FontManagerCompareControls* _sender, GdkRGBA* bg_color, gpointer self) {
	__lambda17_ ((FontManagerCompare*) self, bg_color);
}


static void __lambda18_ (FontManagerCompare* self) {
	font_manager_compare_update_default_colors (self);
}


static void ___lambda18__gtk_widget_style_updated (GtkWidget* _sender, gpointer self) {
	__lambda18_ ((FontManagerCompare*) self);
}


static void font_manager_compare_connect_signals (FontManagerCompare* self) {
	BaseTreeView* _tmp0_ = NULL;
	GtkTreeSelection* _tmp1_ = NULL;
	FontManagerCompareControls* _tmp2_ = NULL;
	FontManagerCompareControls* _tmp3_ = NULL;
	FontManagerCompareControls* _tmp4_ = NULL;
	FontManagerCompareControls* _tmp5_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->tree;
	_tmp1_ = gtk_tree_view_get_selection ((GtkTreeView*) _tmp0_);
	gtk_tree_selection_set_select_function (_tmp1_, ___lambda12__gtk_tree_selection_func, g_object_ref (self), g_object_unref);
	_tmp2_ = self->priv->controls;
	g_signal_connect_object ((FontManagerBaseControls*) _tmp2_, "add-selected", (GCallback) ___lambda14__font_manager_base_controls_add_selected, self, 0);
	_tmp3_ = self->priv->controls;
	g_signal_connect_object ((FontManagerBaseControls*) _tmp3_, "remove-selected", (GCallback) ___lambda15__font_manager_base_controls_remove_selected, self, 0);
	_tmp4_ = self->priv->controls;
	g_signal_connect_object (_tmp4_, "foreground-set", (GCallback) ___lambda16__font_manager_compare_controls_foreground_set, self, 0);
	_tmp5_ = self->priv->controls;
	g_signal_connect_object (_tmp5_, "background-set", (GCallback) ___lambda17__font_manager_compare_controls_background_set, self, 0);
	g_signal_connect_object ((GtkWidget*) self, "style-updated", (GCallback) ___lambda18__gtk_widget_style_updated, self, 0);
	return;
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void font_manager_compare_update_default_colors (FontManagerCompare* self) {
	GtkStyleContext* ctx = NULL;
	GtkStyleContext* _tmp0_ = NULL;
	GtkStyleContext* _tmp1_ = NULL;
	GdkRGBA _tmp2_ = {0};
	GdkRGBA _tmp3_ = {0};
	g_return_if_fail (self != NULL);
	_tmp0_ = gtk_widget_get_style_context ((GtkWidget*) self);
	_tmp1_ = _g_object_ref0 (_tmp0_);
	ctx = _tmp1_;
	gtk_style_context_get_color (ctx, GTK_STATE_FLAG_NORMAL, &_tmp2_);
	self->priv->default_fg_color = _tmp2_;
	gtk_style_context_get_background_color (ctx, GTK_STATE_FLAG_NORMAL, &_tmp3_);
	self->priv->default_bg_color = _tmp3_;
	_g_object_unref0 (ctx);
	return;
}


static void font_manager_compare_real_set_preview_size_internal (FontManagerAdjustablePreview* base, gdouble new_size) {
	FontManagerCompare * self;
	GtkTreeViewColumn* _tmp0_ = NULL;
	self = (FontManagerCompare*) base;
	_tmp0_ = self->priv->column;
	if (_tmp0_ != NULL) {
		GtkTreeViewColumn* _tmp1_ = NULL;
		_tmp1_ = self->priv->column;
		gtk_tree_view_column_queue_resize (_tmp1_);
	}
	return;
}


void font_manager_compare_add_from_string (FontManagerCompare* self, const gchar* font_desc) {
	GtkTreeIter iter = {0};
	GtkTreeIter _iter = {0};
	PangoFontDescription* desc = NULL;
	PangoFontDescription* _tmp0_ = NULL;
	PangoFontDescription* _desc = NULL;
	const gchar* _tmp1_ = NULL;
	PangoFontDescription* _tmp2_ = NULL;
	GtkListStore* _tmp3_ = NULL;
	GtkTreeIter _tmp4_ = {0};
	GtkListStore* _tmp5_ = NULL;
	GtkTreeIter _tmp6_ = {0};
	gchar* _tmp7_ = NULL;
	gchar* _tmp8_ = NULL;
	GtkListStore* _tmp9_ = NULL;
	GtkTreeIter _tmp10_ = {0};
	GtkListStore* _tmp11_ = NULL;
	GtkTreeIter _tmp12_ = {0};
	gchar* _tmp13_ = NULL;
	gchar* _tmp14_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (font_desc != NULL);
	_tmp0_ = pango_font_description_from_string ("Sans");
	desc = _tmp0_;
	_tmp1_ = font_desc;
	_tmp2_ = pango_font_description_from_string (_tmp1_);
	_desc = _tmp2_;
	_tmp3_ = self->priv->store;
	gtk_list_store_append (_tmp3_, &_tmp4_);
	iter = _tmp4_;
	_tmp5_ = self->priv->store;
	_tmp6_ = iter;
	_tmp7_ = pango_font_description_to_string (_desc);
	_tmp8_ = _tmp7_;
	gtk_list_store_set (_tmp5_, &_tmp6_, 0, desc, 1, _tmp8_, -1, -1);
	_g_free0 (_tmp8_);
	_tmp9_ = self->priv->store;
	gtk_list_store_append (_tmp9_, &_tmp10_);
	_iter = _tmp10_;
	_tmp11_ = self->priv->store;
	_tmp12_ = _iter;
	_tmp13_ = pango_font_description_to_string (_desc);
	_tmp14_ = _tmp13_;
	gtk_list_store_set (_tmp11_, &_tmp12_, 0, _desc, 1, _tmp14_, -1, -1);
	_g_free0 (_tmp14_);
	g_signal_emit_by_name (self, "list-modified");
	__vala_PangoFontDescription_free0 (_desc);
	__vala_PangoFontDescription_free0 (desc);
	return;
}


static void font_manager_compare_cell_data_func (FontManagerCompare* self, GtkCellLayout* layout, GtkCellRenderer* cell, GtkTreeModel* model, GtkTreeIter* treeiter) {
	GtkTreeModel* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	GtkTreePath* _tmp2_ = NULL;
	GtkTreePath* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	gint* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	gboolean _tmp7_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (layout != NULL);
	g_return_if_fail (cell != NULL);
	g_return_if_fail (model != NULL);
	g_return_if_fail (treeiter != NULL);
	_tmp0_ = model;
	_tmp1_ = *treeiter;
	_tmp2_ = gtk_tree_model_get_path (_tmp0_, &_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp5_ = gtk_tree_path_get_indices_with_depth (_tmp3_, &_tmp4_);
	_tmp6_ = _tmp5_[0];
	_tmp7_ = (_tmp6_ % 2) == 0;
	_gtk_tree_path_free0 (_tmp3_);
	if (_tmp7_) {
		GtkCellRenderer* _tmp8_ = NULL;
		GdkRGBA _tmp9_ = {0};
		GValue _tmp10_ = {0};
		GtkCellRenderer* _tmp11_ = NULL;
		GdkRGBA _tmp12_ = {0};
		GValue _tmp13_ = {0};
		GtkCellRenderer* _tmp14_ = NULL;
		gdouble _tmp15_ = 0.0;
		GValue _tmp16_ = {0};
		GtkCellRenderer* _tmp17_ = NULL;
		GValue _tmp18_ = {0};
		GtkCellRenderer* _tmp19_ = NULL;
		GValue _tmp20_ = {0};
		_tmp8_ = cell;
		_tmp9_ = self->priv->default_fg_color;
		g_value_init (&_tmp10_, gdk_rgba_get_type ());
		g_value_set_boxed (&_tmp10_, &_tmp9_);
		g_object_set_property ((GObject*) _tmp8_, "foreground-rgba", &_tmp10_);
		G_IS_VALUE (&_tmp10_) ? (g_value_unset (&_tmp10_), NULL) : NULL;
		_tmp11_ = cell;
		_tmp12_ = self->priv->default_bg_color;
		g_value_init (&_tmp13_, gdk_rgba_get_type ());
		g_value_set_boxed (&_tmp13_, &_tmp12_);
		g_object_set_property ((GObject*) _tmp11_, "background-rgba", &_tmp13_);
		G_IS_VALUE (&_tmp13_) ? (g_value_unset (&_tmp13_), NULL) : NULL;
		_tmp14_ = cell;
		_tmp15_ = font_manager_adjustable_preview_get_desc_size ((FontManagerAdjustablePreview*) self);
		g_value_init (&_tmp16_, G_TYPE_DOUBLE);
		g_value_set_double (&_tmp16_, _tmp15_);
		g_object_set_property ((GObject*) _tmp14_, "size-points", &_tmp16_);
		G_IS_VALUE (&_tmp16_) ? (g_value_unset (&_tmp16_), NULL) : NULL;
		_tmp17_ = cell;
		g_value_init (&_tmp18_, G_TYPE_INT);
		g_value_set_int (&_tmp18_, 4);
		g_object_set_property ((GObject*) _tmp17_, "ypad", &_tmp18_);
		G_IS_VALUE (&_tmp18_) ? (g_value_unset (&_tmp18_), NULL) : NULL;
		_tmp19_ = cell;
		g_value_init (&_tmp20_, G_TYPE_DOUBLE);
		g_value_set_double (&_tmp20_, 1.0);
		g_object_set_property ((GObject*) _tmp19_, "scale", &_tmp20_);
		G_IS_VALUE (&_tmp20_) ? (g_value_unset (&_tmp20_), NULL) : NULL;
	} else {
		GtkCellRenderer* _tmp21_ = NULL;
		GdkRGBA _tmp22_ = {0};
		GdkRGBA _tmp23_ = {0};
		GValue _tmp24_ = {0};
		GtkCellRenderer* _tmp25_ = NULL;
		GdkRGBA _tmp26_ = {0};
		GdkRGBA _tmp27_ = {0};
		GValue _tmp28_ = {0};
		GtkCellRenderer* _tmp29_ = NULL;
		const gchar* _tmp30_ = NULL;
		const gchar* _tmp31_ = NULL;
		GValue _tmp32_ = {0};
		GtkCellRenderer* _tmp33_ = NULL;
		gdouble _tmp34_ = 0.0;
		gdouble _tmp35_ = 0.0;
		GValue _tmp36_ = {0};
		GtkCellRenderer* _tmp37_ = NULL;
		GValue _tmp38_ = {0};
		GtkCellRenderer* _tmp39_ = NULL;
		GValue _tmp40_ = {0};
		_tmp21_ = cell;
		font_manager_compare_get_foreground_color (self, &_tmp22_);
		_tmp23_ = _tmp22_;
		g_value_init (&_tmp24_, gdk_rgba_get_type ());
		g_value_set_boxed (&_tmp24_, &_tmp23_);
		g_object_set_property ((GObject*) _tmp21_, "foreground-rgba", &_tmp24_);
		G_IS_VALUE (&_tmp24_) ? (g_value_unset (&_tmp24_), NULL) : NULL;
		_tmp25_ = cell;
		font_manager_compare_get_background_color (self, &_tmp26_);
		_tmp27_ = _tmp26_;
		g_value_init (&_tmp28_, gdk_rgba_get_type ());
		g_value_set_boxed (&_tmp28_, &_tmp27_);
		g_object_set_property ((GObject*) _tmp25_, "background-rgba", &_tmp28_);
		G_IS_VALUE (&_tmp28_) ? (g_value_unset (&_tmp28_), NULL) : NULL;
		_tmp29_ = cell;
		_tmp30_ = font_manager_compare_get_preview_text (self);
		_tmp31_ = _tmp30_;
		g_value_init (&_tmp32_, G_TYPE_STRING);
		g_value_set_string (&_tmp32_, _tmp31_);
		g_object_set_property ((GObject*) _tmp29_, "text", &_tmp32_);
		G_IS_VALUE (&_tmp32_) ? (g_value_unset (&_tmp32_), NULL) : NULL;
		_tmp33_ = cell;
		_tmp34_ = font_manager_adjustable_preview_get_preview_size ((FontManagerAdjustablePreview*) self);
		_tmp35_ = _tmp34_;
		g_value_init (&_tmp36_, G_TYPE_DOUBLE);
		g_value_set_double (&_tmp36_, _tmp35_);
		g_object_set_property ((GObject*) _tmp33_, "size-points", &_tmp36_);
		G_IS_VALUE (&_tmp36_) ? (g_value_unset (&_tmp36_), NULL) : NULL;
		_tmp37_ = cell;
		g_value_init (&_tmp38_, G_TYPE_INT);
		g_value_set_int (&_tmp38_, 4);
		g_object_set_property ((GObject*) _tmp37_, "ypad", &_tmp38_);
		G_IS_VALUE (&_tmp38_) ? (g_value_unset (&_tmp38_), NULL) : NULL;
		_tmp39_ = cell;
		g_value_init (&_tmp40_, G_TYPE_DOUBLE);
		g_value_set_double (&_tmp40_, 1.1);
		g_object_set_property ((GObject*) _tmp39_, "scale", &_tmp40_);
		G_IS_VALUE (&_tmp40_) ? (g_value_unset (&_tmp40_), NULL) : NULL;
	}
	return;
}


static Block17Data* block17_data_ref (Block17Data* _data17_) {
	g_atomic_int_inc (&_data17_->_ref_count_);
	return _data17_;
}


static void block17_data_unref (void * _userdata_) {
	Block17Data* _data17_;
	_data17_ = (Block17Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data17_->_ref_count_)) {
		FontManagerCompare* self;
		self = _data17_->self;
		_data17_->results = (_vala_array_free (_data17_->results, _data17_->results_length1, (GDestroyNotify) g_free), NULL);
		_g_object_unref0 (self);
		g_slice_free (Block17Data, _data17_);
	}
}


static void _vala_array_add11 (gchar*** array, int* length, int* size, gchar* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (gchar*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


static gboolean __lambda19_ (Block17Data* _data17_, GtkTreeModel* m, GtkTreePath* p, GtkTreeIter* i) {
	FontManagerCompare* self;
	gboolean result = FALSE;
	GValue val = {0};
	GtkTreePath* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	GtkTreeModel* _tmp4_ = NULL;
	GtkTreeIter _tmp5_ = {0};
	GValue _tmp6_ = {0};
	gchar** _tmp7_ = NULL;
	gint _tmp7__length1 = 0;
	GValue _tmp8_ = {0};
	gchar* _tmp9_ = NULL;
	self = _data17_->self;
	g_return_val_if_fail (m != NULL, FALSE);
	g_return_val_if_fail (p != NULL, FALSE);
	g_return_val_if_fail (i != NULL, FALSE);
	_tmp0_ = p;
	_tmp2_ = gtk_tree_path_get_indices_with_depth (_tmp0_, &_tmp1_);
	_tmp3_ = _tmp2_[0];
	if ((_tmp3_ % 2) == 0) {
		result = FALSE;
		G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
		return result;
	}
	_tmp4_ = m;
	_tmp5_ = *i;
	gtk_tree_model_get_value (_tmp4_, &_tmp5_, 1, &_tmp6_);
	G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
	val = _tmp6_;
	_tmp7_ = _data17_->results;
	_tmp7__length1 = _data17_->results_length1;
	_tmp8_ = val;
	_tmp9_ = g_strdup (g_value_get_string (&_tmp8_));
	_vala_array_add11 (&_data17_->results, &_data17_->results_length1, &_data17_->_results_size_, _tmp9_);
	g_value_unset (&val);
	result = FALSE;
	G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
	return result;
}


static gboolean ___lambda19__gtk_tree_model_foreach_func (GtkTreeModel* model, GtkTreePath* path, GtkTreeIter* iter, gpointer self) {
	gboolean result;
	result = __lambda19_ (self, model, path, iter);
	return result;
}


static void _vala_array_add12 (gchar*** array, int* length, int* size, gchar* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (gchar*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


static gchar** _vala_array_dup3 (gchar** self, int length) {
	gchar** result;
	int i;
	result = g_new0 (gchar*, length + 1);
	for (i = 0; i < length; i++) {
		gchar* _tmp0_ = NULL;
		_tmp0_ = g_strdup (self[i]);
		result[i] = _tmp0_;
	}
	return result;
}


gchar** font_manager_compare_list (FontManagerCompare* self, int* result_length1) {
	gchar** result = NULL;
	Block17Data* _data17_;
	gchar** _tmp0_ = NULL;
	GtkListStore* _tmp1_ = NULL;
	gchar** _tmp2_ = NULL;
	gint _tmp2__length1 = 0;
	gchar** _tmp3_ = NULL;
	gint _tmp3__length1 = 0;
	gchar** _tmp4_ = NULL;
	gint _tmp4__length1 = 0;
	gchar** _tmp5_ = NULL;
	gint _tmp5__length1 = 0;
	g_return_val_if_fail (self != NULL, NULL);
	_data17_ = g_slice_new0 (Block17Data);
	_data17_->_ref_count_ = 1;
	_data17_->self = g_object_ref (self);
	_tmp0_ = g_new0 (gchar*, 0 + 1);
	_data17_->results = _tmp0_;
	_data17_->results_length1 = 0;
	_data17_->_results_size_ = _data17_->results_length1;
	_tmp1_ = self->priv->store;
	gtk_tree_model_foreach ((GtkTreeModel*) _tmp1_, ___lambda19__gtk_tree_model_foreach_func, _data17_);
	_tmp2_ = _data17_->results;
	_tmp2__length1 = _data17_->results_length1;
	_vala_array_add12 (&_data17_->results, &_data17_->results_length1, &_data17_->_results_size_, NULL);
	_tmp3_ = _data17_->results;
	_tmp3__length1 = _data17_->results_length1;
	_tmp4_ = (_tmp3_ != NULL) ? _vala_array_dup3 (_tmp3_, _tmp3__length1) : ((gpointer) _tmp3_);
	_tmp4__length1 = _tmp3__length1;
	_tmp5_ = _tmp4_;
	_tmp5__length1 = _tmp4__length1;
	if (result_length1) {
		*result_length1 = _tmp5__length1;
	}
	result = _tmp5_;
	block17_data_unref (_data17_);
	_data17_ = NULL;
	return result;
}


static void font_manager_compare_on_remove (FontManagerCompare* self) {
	GtkTreeModel* model = NULL;
	GtkTreeIter iter = {0};
	BaseTreeView* _tmp0_ = NULL;
	GtkTreeSelection* _tmp1_ = NULL;
	GtkTreeModel* _tmp2_ = NULL;
	GtkTreeIter _tmp3_ = {0};
	GtkTreeModel* _tmp4_ = NULL;
	GtkListStore* _tmp5_ = NULL;
	GtkTreeIter _tmp6_ = {0};
	gboolean _tmp7_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->tree;
	_tmp1_ = gtk_tree_view_get_selection ((GtkTreeView*) _tmp0_);
	gtk_tree_selection_get_selected (_tmp1_, &_tmp2_, &_tmp3_);
	_g_object_unref0 (model);
	_tmp4_ = _g_object_ref0 (_tmp2_);
	model = _tmp4_;
	iter = _tmp3_;
	_tmp5_ = self->priv->store;
	_tmp6_ = iter;
	_tmp7_ = gtk_list_store_iter_is_valid (_tmp5_, &_tmp6_);
	if (_tmp7_) {
		gchar* iter_as_string = NULL;
		GtkListStore* _tmp8_ = NULL;
		GtkTreeIter _tmp9_ = {0};
		gchar* _tmp10_ = NULL;
		GtkListStore* _tmp11_ = NULL;
		GtkTreeIter _tmp12_ = {0};
		GtkListStore* _tmp13_ = NULL;
		const gchar* _tmp14_ = NULL;
		GtkTreeIter _tmp15_ = {0};
		gboolean still_valid = FALSE;
		GtkListStore* _tmp16_ = NULL;
		GtkTreeIter _tmp17_ = {0};
		gboolean _tmp18_ = FALSE;
		gboolean _tmp19_ = FALSE;
		_tmp8_ = self->priv->store;
		_tmp9_ = iter;
		_tmp10_ = gtk_tree_model_get_string_from_iter ((GtkTreeModel*) _tmp8_, &_tmp9_);
		iter_as_string = _tmp10_;
		_tmp11_ = self->priv->store;
		_tmp12_ = iter;
		gtk_list_store_remove (_tmp11_, &_tmp12_);
		_tmp13_ = self->priv->store;
		_tmp14_ = iter_as_string;
		gtk_tree_model_get_iter_from_string ((GtkTreeModel*) _tmp13_, &_tmp15_, _tmp14_);
		iter = _tmp15_;
		_tmp16_ = self->priv->store;
		_tmp17_ = iter;
		_tmp18_ = gtk_list_store_remove (_tmp16_, &_tmp17_);
		still_valid = _tmp18_;
		_tmp19_ = still_valid;
		if (_tmp19_) {
			GtkListStore* _tmp20_ = NULL;
			const gchar* _tmp21_ = NULL;
			GtkTreeIter _tmp22_ = {0};
			GtkTreePath* path = NULL;
			GtkTreeModel* _tmp23_ = NULL;
			GtkTreeIter _tmp24_ = {0};
			GtkTreePath* _tmp25_ = NULL;
			gboolean _tmp26_ = FALSE;
			GtkTreePath* _tmp27_ = NULL;
			_tmp20_ = self->priv->store;
			_tmp21_ = iter_as_string;
			gtk_tree_model_get_iter_from_string ((GtkTreeModel*) _tmp20_, &_tmp22_, _tmp21_);
			iter = _tmp22_;
			_tmp23_ = model;
			_tmp24_ = iter;
			_tmp25_ = gtk_tree_model_get_path (_tmp23_, &_tmp24_);
			path = _tmp25_;
			_tmp27_ = path;
			if (_tmp27_ != NULL) {
				GtkTreePath* _tmp28_ = NULL;
				gint _tmp29_ = 0;
				gint* _tmp30_ = NULL;
				gint _tmp31_ = 0;
				_tmp28_ = path;
				_tmp30_ = gtk_tree_path_get_indices_with_depth (_tmp28_, &_tmp29_);
				_tmp31_ = _tmp30_[0];
				_tmp26_ = _tmp31_ >= 0;
			} else {
				_tmp26_ = FALSE;
			}
			if (_tmp26_) {
				BaseTreeView* _tmp32_ = NULL;
				GtkTreePath* _tmp33_ = NULL;
				GtkTreeViewColumn* _tmp34_ = NULL;
				_tmp32_ = self->priv->tree;
				_tmp33_ = path;
				_tmp34_ = self->priv->column;
				gtk_tree_view_set_cursor ((GtkTreeView*) _tmp32_, _tmp33_, _tmp34_, FALSE);
			}
			_gtk_tree_path_free0 (path);
		} else {
			gint n_children = 0;
			GtkTreeModel* _tmp35_ = NULL;
			gint _tmp36_ = 0;
			gint _tmp37_ = 0;
			_tmp35_ = model;
			_tmp36_ = gtk_tree_model_iter_n_children (_tmp35_, NULL);
			n_children = _tmp36_ - 2;
			_tmp37_ = n_children;
			if (_tmp37_ >= 0) {
				GtkTreePath* path = NULL;
				gint _tmp38_ = 0;
				gchar* _tmp39_ = NULL;
				gchar* _tmp40_ = NULL;
				GtkTreePath* _tmp41_ = NULL;
				GtkTreePath* _tmp42_ = NULL;
				BaseTreeView* _tmp43_ = NULL;
				GtkTreeSelection* _tmp44_ = NULL;
				GtkTreePath* _tmp45_ = NULL;
				_tmp38_ = n_children;
				_tmp39_ = g_strdup_printf ("%i", _tmp38_);
				_tmp40_ = _tmp39_;
				_tmp41_ = gtk_tree_path_new_from_string (_tmp40_);
				_tmp42_ = _tmp41_;
				_g_free0 (_tmp40_);
				path = _tmp42_;
				_tmp43_ = self->priv->tree;
				_tmp44_ = gtk_tree_view_get_selection ((GtkTreeView*) _tmp43_);
				_tmp45_ = path;
				gtk_tree_selection_select_path (_tmp44_, _tmp45_);
				_gtk_tree_path_free0 (path);
			}
		}
		_g_free0 (iter_as_string);
	}
	g_signal_emit_by_name (self, "list-modified");
	_g_object_unref0 (model);
	return;
}


void font_manager_compare_get_foreground_color (FontManagerCompare* self, GdkRGBA* result) {
	FontManagerCompareControls* _tmp0_ = NULL;
	GtkColorButton* _tmp1_ = NULL;
	GtkColorButton* _tmp2_ = NULL;
	GdkRGBA _tmp3_ = {0};
	GdkRGBA _tmp4_ = {0};
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->controls;
	_tmp1_ = font_manager_compare_controls_get_fg_color_button (_tmp0_);
	_tmp2_ = _tmp1_;
	gtk_color_chooser_get_rgba (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, GTK_TYPE_COLOR_CHOOSER, GtkColorChooser), &_tmp3_);
	_tmp4_ = _tmp3_;
	*result = _tmp4_;
	return;
}


void font_manager_compare_set_foreground_color (FontManagerCompare* self, GdkRGBA* value) {
	FontManagerCompareControls* _tmp0_ = NULL;
	GtkColorButton* _tmp1_ = NULL;
	GtkColorButton* _tmp2_ = NULL;
	GdkRGBA _tmp3_ = {0};
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->controls;
	_tmp1_ = font_manager_compare_controls_get_fg_color_button (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = *value;
	gtk_color_chooser_set_rgba (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, GTK_TYPE_COLOR_CHOOSER, GtkColorChooser), &_tmp3_);
	g_object_notify ((GObject *) self, "foreground-color");
}


void font_manager_compare_get_background_color (FontManagerCompare* self, GdkRGBA* result) {
	FontManagerCompareControls* _tmp0_ = NULL;
	GtkColorButton* _tmp1_ = NULL;
	GtkColorButton* _tmp2_ = NULL;
	GdkRGBA _tmp3_ = {0};
	GdkRGBA _tmp4_ = {0};
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->controls;
	_tmp1_ = font_manager_compare_controls_get_bg_color_button (_tmp0_);
	_tmp2_ = _tmp1_;
	gtk_color_chooser_get_rgba (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, GTK_TYPE_COLOR_CHOOSER, GtkColorChooser), &_tmp3_);
	_tmp4_ = _tmp3_;
	*result = _tmp4_;
	return;
}


void font_manager_compare_set_background_color (FontManagerCompare* self, GdkRGBA* value) {
	FontManagerCompareControls* _tmp0_ = NULL;
	GtkColorButton* _tmp1_ = NULL;
	GtkColorButton* _tmp2_ = NULL;
	GdkRGBA _tmp3_ = {0};
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->controls;
	_tmp1_ = font_manager_compare_controls_get_bg_color_button (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = *value;
	gtk_color_chooser_set_rgba (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, GTK_TYPE_COLOR_CHOOSER, GtkColorChooser), &_tmp3_);
	g_object_notify ((GObject *) self, "background-color");
}


const gchar* font_manager_compare_get_preview_text (FontManagerCompare* self) {
	const gchar* result;
	const gchar* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_preview_text;
	result = _tmp0_;
	return result;
}


void font_manager_compare_set_preview_text (FontManagerCompare* self, const gchar* value) {
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp4_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp1_ = value;
	if (_tmp1_ != NULL) {
		const gchar* _tmp2_ = NULL;
		_tmp2_ = value;
		_tmp0_ = _tmp2_;
	} else {
		const gchar* _tmp3_ = NULL;
		_tmp3_ = self->priv->default_preview_text;
		_tmp0_ = _tmp3_;
	}
	_tmp4_ = g_strdup (_tmp0_);
	_g_free0 (self->priv->_preview_text);
	self->priv->_preview_text = _tmp4_;
	g_object_notify ((GObject *) self, "preview-text");
}


PangoFontDescription* font_manager_compare_get_font_desc (FontManagerCompare* self) {
	PangoFontDescription* result;
	PangoFontDescription* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_font_desc;
	result = _tmp0_;
	return result;
}


static PangoFontDescription* _vala_PangoFontDescription_copy (PangoFontDescription* self) {
	return g_boxed_copy (pango_font_description_get_type (), self);
}


static gpointer __vala_PangoFontDescription_copy0 (gpointer self) {
	return self ? _vala_PangoFontDescription_copy (self) : NULL;
}


void font_manager_compare_set_font_desc (FontManagerCompare* self, PangoFontDescription* value) {
	PangoFontDescription* _tmp0_ = NULL;
	PangoFontDescription* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = __vala_PangoFontDescription_copy0 (_tmp0_);
	__vala_PangoFontDescription_free0 (self->priv->_font_desc);
	self->priv->_font_desc = _tmp1_;
	g_object_notify ((GObject *) self, "font-desc");
}


static void font_manager_compare_class_init (FontManagerCompareClass * klass) {
	font_manager_compare_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (FontManagerComparePrivate));
	((GtkWidgetClass *) klass)->show = font_manager_compare_real_show;
	((FontManagerAdjustablePreviewClass *) klass)->set_preview_size_internal = font_manager_compare_real_set_preview_size_internal;
	G_OBJECT_CLASS (klass)->get_property = _vala_font_manager_compare_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_font_manager_compare_set_property;
	G_OBJECT_CLASS (klass)->finalize = font_manager_compare_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), FONT_MANAGER_COMPARE_FOREGROUND_COLOR, g_param_spec_boxed ("foreground-color", "foreground-color", "foreground-color", gdk_rgba_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), FONT_MANAGER_COMPARE_BACKGROUND_COLOR, g_param_spec_boxed ("background-color", "background-color", "background-color", gdk_rgba_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), FONT_MANAGER_COMPARE_PREVIEW_TEXT, g_param_spec_string ("preview-text", "preview-text", "preview-text", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), FONT_MANAGER_COMPARE_FONT_DESC, g_param_spec_boxed ("font-desc", "font-desc", "font-desc", pango_font_description_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_signal_new ("list_modified", FONT_MANAGER_TYPE_COMPARE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("color_set", FONT_MANAGER_TYPE_COMPARE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
}


static void font_manager_compare_instance_init (FontManagerCompare * self) {
	self->priv = FONT_MANAGER_COMPARE_GET_PRIVATE (self);
}


static void font_manager_compare_finalize (GObject* obj) {
	FontManagerCompare * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, FONT_MANAGER_TYPE_COMPARE, FontManagerCompare);
	_g_free0 (self->priv->_preview_text);
	_g_free0 (self->priv->default_preview_text);
	_g_object_unref0 (self->priv->box);
	_g_object_unref0 (self->priv->tree);
	_g_object_unref0 (self->priv->store);
	_g_object_unref0 (self->priv->scroll);
	_g_object_unref0 (self->priv->column);
	_g_object_unref0 (self->priv->renderer);
	__vala_PangoFontDescription_free0 (self->priv->_font_desc);
	_g_object_unref0 (self->priv->controls);
	G_OBJECT_CLASS (font_manager_compare_parent_class)->finalize (obj);
}


GType font_manager_compare_get_type (void) {
	static volatile gsize font_manager_compare_type_id__volatile = 0;
	if (g_once_init_enter (&font_manager_compare_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (FontManagerCompareClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) font_manager_compare_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (FontManagerCompare), 0, (GInstanceInitFunc) font_manager_compare_instance_init, NULL };
		GType font_manager_compare_type_id;
		font_manager_compare_type_id = g_type_register_static (FONT_MANAGER_TYPE_ADJUSTABLE_PREVIEW, "FontManagerCompare", &g_define_type_info, 0);
		g_once_init_leave (&font_manager_compare_type_id__volatile, font_manager_compare_type_id);
	}
	return font_manager_compare_type_id__volatile;
}


static void _vala_font_manager_compare_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	FontManagerCompare * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, FONT_MANAGER_TYPE_COMPARE, FontManagerCompare);
	switch (property_id) {
		case FONT_MANAGER_COMPARE_FOREGROUND_COLOR:
		{
			GdkRGBA boxed;
			font_manager_compare_get_foreground_color (self, &boxed);
			g_value_set_boxed (value, &boxed);
		}
		break;
		case FONT_MANAGER_COMPARE_BACKGROUND_COLOR:
		{
			GdkRGBA boxed;
			font_manager_compare_get_background_color (self, &boxed);
			g_value_set_boxed (value, &boxed);
		}
		break;
		case FONT_MANAGER_COMPARE_PREVIEW_TEXT:
		g_value_set_string (value, font_manager_compare_get_preview_text (self));
		break;
		case FONT_MANAGER_COMPARE_FONT_DESC:
		g_value_set_boxed (value, font_manager_compare_get_font_desc (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_font_manager_compare_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	FontManagerCompare * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, FONT_MANAGER_TYPE_COMPARE, FontManagerCompare);
	switch (property_id) {
		case FONT_MANAGER_COMPARE_FOREGROUND_COLOR:
		font_manager_compare_set_foreground_color (self, g_value_get_boxed (value));
		break;
		case FONT_MANAGER_COMPARE_BACKGROUND_COLOR:
		font_manager_compare_set_background_color (self, g_value_get_boxed (value));
		break;
		case FONT_MANAGER_COMPARE_PREVIEW_TEXT:
		font_manager_compare_set_preview_text (self, g_value_get_string (value));
		break;
		case FONT_MANAGER_COMPARE_FONT_DESC:
		font_manager_compare_set_font_desc (self, g_value_get_boxed (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



